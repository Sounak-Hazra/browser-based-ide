"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@webcontainer";
exports.ids = ["vendor-chunks/@webcontainer"];
exports.modules = {

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   WebContainer: () => (/* binding */ WebContainer),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   configureAPIKey: () => (/* binding */ configureAPIKey),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/auth-state.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vendor/index.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\");\n/* harmony import */ var _internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./internal/tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./internal/iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils.js\");\n/* harmony import */ var _utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/file-system.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\");\n/**\n * The WebContainer Public API allows you build custom applications on top of an in-browser Node.js runtime.\n *\n * Its main entrypoint is the {@link WebContainer} class.\n *\n * @packageDocumentation\n */\n\n\n\n\n\n\n\n\nconst auth = _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.auth;\n\n\nlet bootPromise = null;\nlet cachedServerPromise = null;\nlet cachedBootOptions = {};\nconst decoder = new TextDecoder();\nconst encoder = new TextEncoder();\n/**\n * The main export of this library. An instance of `WebContainer` represents a runtime\n * ready to be used.\n */\nclass WebContainer {\n    _instance;\n    _runtimeInfo;\n    /**\n     * Gives access to the underlying file system.\n     */\n    fs;\n    /** @internal */\n    static _instance = null;\n    /** @internal */\n    static _teardownPromise = null;\n    _tornDown = false;\n    _unsubscribeFromTokenChangedListener = () => { };\n    /** @internal */\n    constructor(\n    /** @internal */\n    _instance, fs, previewScript, \n    /** @internal */\n    _runtimeInfo) {\n        this._instance = _instance;\n        this._runtimeInfo = _runtimeInfo;\n        this.fs = new FileSystemAPIClient(fs);\n        // forward the credentials to webcontainer if needed\n        if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.initialized) {\n            this._unsubscribeFromTokenChangedListener = (0,_internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__.addAccessTokenChangedListener)((accessToken) => {\n                this._instance.setCredentials({ accessToken, editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin });\n            });\n            (async () => {\n                await _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.authComplete.promise;\n                if (this._tornDown) {\n                    return;\n                }\n                (0,_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.assertAuthTokens)(_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens);\n                await this._instance.setCredentials({\n                    accessToken: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens.access,\n                    editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin,\n                });\n            })().catch((error) => {\n                // print the error as this is likely a bug in webcontainer\n                console.error(error);\n            });\n        }\n    }\n    async spawn(command, optionsOrArgs, options) {\n        let args = [];\n        if (Array.isArray(optionsOrArgs)) {\n            args = optionsOrArgs;\n        }\n        else {\n            options = optionsOrArgs;\n        }\n        let output = undefined;\n        let outputStream = new ReadableStream();\n        if (options?.output !== false) {\n            const result = streamWithPush();\n            output = result.push;\n            outputStream = result.stream;\n        }\n        let stdout = undefined;\n        let stdoutStream;\n        let stderr = undefined;\n        let stderrStream;\n        const wrappedOutput = proxyListener(binaryListener(output));\n        const wrappedStdout = proxyListener(binaryListener(stdout));\n        const wrappedStderr = proxyListener(binaryListener(stderr));\n        const process = await this._instance.run({\n            command,\n            args,\n            cwd: options?.cwd,\n            env: options?.env,\n            terminal: options?.terminal,\n        }, wrappedStdout, wrappedStderr, wrappedOutput);\n        return new WebContainerProcessImpl(process, outputStream, stdoutStream, stderrStream);\n    }\n    async export(path, options) {\n        const serializeOptions = {\n            format: options?.format ?? 'json',\n            includes: options?.includes,\n            excludes: options?.excludes,\n            external: true,\n        };\n        const result = await this._instance.serialize(path, serializeOptions);\n        if (serializeOptions.format === 'json') {\n            const data = JSON.parse(decoder.decode(result));\n            return (0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toExternalFileSystemTree)(data);\n        }\n        return result;\n    }\n    on(event, listener) {\n        if (event === 'preview-message') {\n            const originalListener = listener;\n            listener = ((message) => {\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage)(message)) {\n                    originalListener(message);\n                }\n            });\n        }\n        const { listener: wrapped, subscribe } = syncSubscription(listener);\n        return subscribe(this._instance.on(event, _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(wrapped)));\n    }\n    /**\n     * Mounts a tree of files into the filesystem. This can be specified as a tree object ({@link FileSystemTree})\n     * or as a binary snapshot generated by [`@webcontainer/snapshot`](https://www.npmjs.com/package/@webcontainer/snapshot).\n     *\n     * @param snapshotOrTree - A tree of files, or a binary snapshot. Note that binary payloads will be transferred.\n     * @param options.mountPoint - Specifies a nested path where the tree should be mounted.\n     */\n    mount(snapshotOrTree, options) {\n        const payload = snapshotOrTree instanceof Uint8Array\n            ? snapshotOrTree\n            : snapshotOrTree instanceof ArrayBuffer\n                ? new Uint8Array(snapshotOrTree)\n                : encoder.encode(JSON.stringify((0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toInternalFileSystemTree)(snapshotOrTree)));\n        return this._instance.loadFiles(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(payload, [payload.buffer]), {\n            mountPoints: options?.mountPoint,\n        });\n    }\n    /**\n     * Set a custom script to be injected into all previews. When this function is called, every\n     * future page reload will contain the provided script tag on all HTML responses.\n     *\n     * Note:\n     *\n     * When this function resolves, every preview reloaded _after_ will have the new script.\n     * Existing preview have to be explicitely reloaded.\n     *\n     * To reload a preview you can use `reloadPreview`.\n     *\n     * @param scriptSrc Source for the script tag.\n     * @param options Options to define which type of script this is.\n     */\n    setPreviewScript(scriptSrc, options) {\n        return this._instance.setPreviewScript(scriptSrc, options);\n    }\n    /**\n     * The default value of the `PATH` environment variable for processes started through {@link spawn}.\n     */\n    get path() {\n        return this._runtimeInfo.path;\n    }\n    /**\n     * The full path to the working directory (see {@link FileSystemAPI}).\n     */\n    get workdir() {\n        return this._runtimeInfo.cwd;\n    }\n    /**\n     * Destroys the WebContainer instance, turning it unusable, and releases its resources. After this,\n     * a new WebContainer instance can be obtained by calling {@link WebContainer.boot | `boot`}.\n     *\n     * All entities derived from this instance (e.g. processes, the file system, etc.) also become unusable\n     * after calling this method.\n     */\n    teardown() {\n        if (this._tornDown) {\n            throw new Error('WebContainer already torn down');\n        }\n        this._tornDown = true;\n        this._unsubscribeFromTokenChangedListener();\n        const teardownFn = async () => {\n            try {\n                await this.fs._teardown();\n                await this._instance.teardown();\n            }\n            finally {\n                this._instance[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n                if (WebContainer._instance === this) {\n                    WebContainer._instance = null;\n                }\n            }\n        };\n        WebContainer._teardownPromise = teardownFn();\n    }\n    /**\n     * Boots a WebContainer. Only a single instance of WebContainer can be booted concurrently\n     * (see {@link WebContainer.teardown | `teardown`}).\n     *\n     * Booting WebContainer is an expensive operation.\n     */\n    static async boot(options = {}) {\n        await this._teardownPromise;\n        WebContainer._teardownPromise = null;\n        const { workdirName } = options;\n        if (window.crossOriginIsolated && options.coep === 'none') {\n            console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.\\nSet the 'coep' option to 'require-corp'.`);\n        }\n        if (workdirName?.includes('/') || workdirName === '..' || workdirName === '.') {\n            throw new Error('workdirName should be a valid folder name');\n        }\n        // signal that boot was called to auth module as calling auth.init after boot is likely incorrect\n        _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled = true;\n        // try to \"acquire the lock\", i.e. wait for any ongoing boot request to finish\n        while (bootPromise) {\n            await bootPromise;\n        }\n        if (WebContainer._instance) {\n            throw new Error('Only a single WebContainer instance can be booted');\n        }\n        const instancePromise = unsynchronizedBoot(options);\n        // the \"lock\" is a promise for the ongoing boot that never fails\n        bootPromise = instancePromise.catch(() => { });\n        try {\n            const instance = await instancePromise;\n            WebContainer._instance = instance;\n            return instance;\n        }\n        finally {\n            // release the \"lock\"\n            bootPromise = null;\n        }\n    }\n}\n/**\n * Configure an API key to be used for this instance of WebContainer.\n *\n * @param key WebContainer API key.\n */\nfunction configureAPIKey(key) {\n    if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled) {\n        throw new Error('`configureAPIKey` should always be called before `WebContainer.boot`');\n    }\n    _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('client_id', key);\n}\nconst DIR_ENTRY_TYPE_FILE = 1;\nconst DIR_ENTRY_TYPE_DIR = 2;\n/**\n * @internal\n */\nclass DirEntImpl {\n    name;\n    _type;\n    constructor(name, _type) {\n        this.name = name;\n        this._type = _type;\n    }\n    isFile() {\n        return this._type === DIR_ENTRY_TYPE_FILE;\n    }\n    isDirectory() {\n        return this._type === DIR_ENTRY_TYPE_DIR;\n    }\n}\nclass FSWatcher {\n    _apiClient;\n    _path;\n    _options;\n    _listener;\n    _wrappedListener;\n    _watcher;\n    _closed = false;\n    constructor(_apiClient, _path, _options, _listener) {\n        this._apiClient = _apiClient;\n        this._path = _path;\n        this._options = _options;\n        this._listener = _listener;\n        this._apiClient._watchers.add(this);\n        this._wrappedListener = (event, filename) => {\n            if (this._listener && !this._closed) {\n                this._listener(event, filename);\n            }\n        };\n        this._apiClient._fs\n            .watch(this._path, this._options, proxyListener(this._wrappedListener))\n            .then((_watcher) => {\n            this._watcher = _watcher;\n            if (this._closed) {\n                return this._teardown();\n            }\n            return undefined;\n        })\n            .catch(console.error);\n    }\n    async close() {\n        if (!this._closed) {\n            this._closed = true;\n            this._apiClient._watchers.delete(this);\n            await this._teardown();\n        }\n    }\n    /**\n     * @internal\n     */\n    async _teardown() {\n        await this._watcher?.close().finally(() => {\n            this._watcher?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        });\n    }\n}\n/**\n * @internal\n */\nclass WebContainerProcessImpl {\n    output;\n    input;\n    exit;\n    _process;\n    stdout;\n    stderr;\n    constructor(process, output, stdout, stderr) {\n        this.output = output;\n        this._process = process;\n        this.input = new WritableStream({\n            write: (data) => {\n                // this promise is not supposed to fail anyway\n                this._getProcess()\n                    ?.write(data)\n                    .catch(() => { });\n            },\n        });\n        this.exit = this._onExit();\n        this.stdout = stdout;\n        this.stderr = stderr;\n    }\n    kill() {\n        this._process?.kill();\n    }\n    resize(dimensions) {\n        this._getProcess()?.resize(dimensions);\n    }\n    async _onExit() {\n        try {\n            return await this._process.onExit;\n        }\n        finally {\n            this._process?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n            this._process = null;\n        }\n    }\n    _getProcess() {\n        if (this._process == null) {\n            console.warn('This process already exited');\n        }\n        return this._process;\n    }\n}\n/**\n * @internal\n */\nclass FileSystemAPIClient {\n    _fs;\n    _watchers = new Set([]);\n    constructor(fs) {\n        this._fs = fs;\n    }\n    rm(...args) {\n        return this._fs.rm(...args);\n    }\n    async readFile(path, encoding) {\n        return await this._fs.readFile(path, encoding);\n    }\n    async rename(oldPath, newPath) {\n        return await this._fs.rename(oldPath, newPath);\n    }\n    async writeFile(path, data, options) {\n        if (data instanceof Uint8Array) {\n            const buffer = data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n            data = _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(new Uint8Array(buffer), [buffer]);\n        }\n        await this._fs.writeFile(path, data, options);\n    }\n    async readdir(path, options) {\n        const result = await this._fs.readdir(path, options);\n        if (isStringArray(result)) {\n            return result;\n        }\n        if (isTypedArrayCollection(result)) {\n            return result;\n        }\n        const entries = result.map((entry) => new DirEntImpl(entry.name, entry['Symbol(type)']));\n        return entries;\n    }\n    async mkdir(path, options) {\n        return await this._fs.mkdir(path, options);\n    }\n    watch(path, options, listener) {\n        if (typeof options === 'function') {\n            listener = options;\n            options = null;\n        }\n        return new FSWatcher(this, path, options, listener);\n    }\n    /**\n     * @internal\n     */\n    async _teardown() {\n        this._fs[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        await Promise.all([...this._watchers].map((watcher) => watcher.close()));\n    }\n}\nasync function unsynchronizedBoot(options) {\n    const { serverPromise } = serverFactory(options);\n    const server = await serverPromise;\n    const instance = await server.build({\n        host: window.location.host,\n        version: \"1.6.1\",\n        workdirName: options.workdirName,\n        forwardPreviewErrors: options.forwardPreviewErrors,\n    });\n    const [fs, previewScript, runtimeInfo] = await Promise.all([\n        instance.fs(),\n        instance.previewScript(),\n        instance.runtimeInfo(),\n    ]);\n    return new WebContainer(instance, fs, previewScript, runtimeInfo);\n}\nfunction binaryListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return (data) => {\n        if (data instanceof Uint8Array) {\n            listener(decoder.decode(data));\n        }\n        else if (data == null) {\n            listener(null);\n        }\n    };\n}\nfunction proxyListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(listener);\n}\nfunction serverFactory(options) {\n    if (cachedServerPromise != null) {\n        if (options.coep !== cachedBootOptions.coep) {\n            console.warn(`Attempting to boot WebContainer with 'coep: ${options.coep}'`);\n            console.warn(`First boot had 'coep: ${cachedBootOptions.coep}', new settings will not take effect!`);\n        }\n        return { serverPromise: cachedServerPromise };\n    }\n    if (options.coep) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('coep', options.coep);\n    }\n    if (options.experimentalNode) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('experimental_node', '1');\n    }\n    const iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.setAttribute('allow', 'cross-origin-isolated');\n    const url = _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.url;\n    iframe.src = url.toString();\n    const { origin } = url;\n    cachedBootOptions = { ...options };\n    cachedServerPromise = new Promise((resolve) => {\n        const onMessage = (event) => {\n            if (event.origin !== origin) {\n                return;\n            }\n            const { data } = event;\n            if (data.type === 'init') {\n                resolve(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.wrap(event.ports[0]));\n                return;\n            }\n            if (data.type === 'warning') {\n                console[data.level].call(console, data.message);\n                return;\n            }\n        };\n        window.addEventListener('message', onMessage);\n    });\n    document.body.insertBefore(iframe, null);\n    return { serverPromise: cachedServerPromise };\n}\nfunction isStringArray(list) {\n    return typeof list[0] === 'string';\n}\nfunction isTypedArrayCollection(list) {\n    return list[0] instanceof Uint8Array;\n}\nfunction streamWithPush() {\n    let controller = null;\n    const stream = new ReadableStream({\n        start(controller_) {\n            controller = controller_;\n        },\n    });\n    const push = (item) => {\n        if (item != null) {\n            controller?.enqueue(item);\n        }\n        else {\n            controller?.close();\n            controller = null;\n        }\n    };\n    return { stream, push };\n}\nfunction syncSubscription(listener) {\n    let stopped = false;\n    let unsubscribe = () => { };\n    const wrapped = ((...args) => {\n        if (stopped) {\n            return;\n        }\n        listener(...args);\n    });\n    return {\n        subscribe(promise) {\n            promise.then((unsubscribe_) => {\n                unsubscribe = unsubscribe_;\n                if (stopped) {\n                    unsubscribe();\n                }\n            });\n            return () => {\n                stopped = true;\n                unsubscribe();\n            };\n        },\n        listener: wrapped,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9CQUFvQjtBQUNuRDtBQUNBO0FBQ0E7QUFDdUU7QUFDUDtBQUNwQjtBQUNnQjtBQUNTO0FBQ1g7QUFDWjtBQUM4QztBQUNyRixhQUFhLHlEQUFRO0FBQ0U7QUFDSDtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUztBQUNyQix3REFBd0Qsa0ZBQTZCO0FBQ3JGLGdEQUFnRCwyQkFBMkIsOERBQVMsZUFBZTtBQUNuRyxhQUFhO0FBQ2I7QUFDQSxzQkFBc0IsOERBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlFQUFnQixDQUFDLDhEQUFTO0FBQzFDO0FBQ0EsaUNBQWlDLDhEQUFTO0FBQzFDLGtDQUFrQyw4REFBUztBQUMzQyxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrRUFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQWdCO0FBQ3BDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0IsK0JBQStCO0FBQy9DLGtEQUFrRCxxREFBTztBQUN6RDtBQUNBO0FBQ0EsNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrRUFBd0I7QUFDeEUsd0NBQXdDLHFEQUFPO0FBQy9DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLFlBQVk7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxvQkFBb0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGlDQUFpQztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlDQUF5QztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsOERBQVM7QUFDakI7QUFDQTtBQUNBLElBQUksbUVBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFEQUFPO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFEQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsYUFBYTtBQUNyRixrREFBa0QsdUJBQXVCO0FBQ3pFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxRQUFRLG1FQUFjO0FBQ3RCO0FBQ0E7QUFDQSxRQUFRLG1FQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFjO0FBQzlCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQSx3QkFBd0IscURBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlIFdlYkNvbnRhaW5lciBQdWJsaWMgQVBJIGFsbG93cyB5b3UgYnVpbGQgY3VzdG9tIGFwcGxpY2F0aW9ucyBvbiB0b3Agb2YgYW4gaW4tYnJvd3NlciBOb2RlLmpzIHJ1bnRpbWUuXG4gKlxuICogSXRzIG1haW4gZW50cnlwb2ludCBpcyB0aGUge0BsaW5rIFdlYkNvbnRhaW5lcn0gY2xhc3MuXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cbmltcG9ydCB7IGF1dGhTdGF0ZSwgYXNzZXJ0QXV0aFRva2VucyB9IGZyb20gJy4vaW50ZXJuYWwvYXV0aC1zdGF0ZS5qcyc7XG5pbXBvcnQgeyBQcmV2aWV3TWVzc2FnZVR5cGUgfSBmcm9tICcuL3ByZXZpZXctbWVzc2FnZS10eXBlcy5qcyc7XG5pbXBvcnQgeyBDb21saW5rIH0gZnJvbSAnLi92ZW5kb3IvaW5kZXguanMnO1xuaW1wb3J0IHsgYXV0aCBhcyBhdXRoSW1wbCB9IGZyb20gJy4vaW50ZXJuYWwvYXV0aC1zdGF0ZS5qcyc7XG5pbXBvcnQgeyBhZGRBY2Nlc3NUb2tlbkNoYW5nZWRMaXN0ZW5lciB9IGZyb20gJy4vaW50ZXJuYWwvdG9rZW5zLmpzJztcbmltcG9ydCB7IGlmcmFtZVNldHRpbmdzIH0gZnJvbSAnLi9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzJztcbmltcG9ydCB7IGlzUHJldmlld01lc3NhZ2UgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZSwgdG9JbnRlcm5hbEZpbGVTeXN0ZW1UcmVlIH0gZnJvbSAnLi91dGlscy9maWxlLXN5c3RlbS5qcyc7XG5leHBvcnQgY29uc3QgYXV0aCA9IGF1dGhJbXBsO1xuZXhwb3J0IHsgUHJldmlld01lc3NhZ2VUeXBlIH07XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzLmpzJztcbmxldCBib290UHJvbWlzZSA9IG51bGw7XG5sZXQgY2FjaGVkU2VydmVyUHJvbWlzZSA9IG51bGw7XG5sZXQgY2FjaGVkQm9vdE9wdGlvbnMgPSB7fTtcbmNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbi8qKlxuICogVGhlIG1haW4gZXhwb3J0IG9mIHRoaXMgbGlicmFyeS4gQW4gaW5zdGFuY2Ugb2YgYFdlYkNvbnRhaW5lcmAgcmVwcmVzZW50cyBhIHJ1bnRpbWVcbiAqIHJlYWR5IHRvIGJlIHVzZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJDb250YWluZXIge1xuICAgIF9pbnN0YW5jZTtcbiAgICBfcnVudGltZUluZm87XG4gICAgLyoqXG4gICAgICogR2l2ZXMgYWNjZXNzIHRvIHRoZSB1bmRlcmx5aW5nIGZpbGUgc3lzdGVtLlxuICAgICAqL1xuICAgIGZzO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBzdGF0aWMgX2luc3RhbmNlID0gbnVsbDtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIF90ZWFyZG93blByb21pc2UgPSBudWxsO1xuICAgIF90b3JuRG93biA9IGZhbHNlO1xuICAgIF91bnN1YnNjcmliZUZyb21Ub2tlbkNoYW5nZWRMaXN0ZW5lciA9ICgpID0+IHsgfTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9pbnN0YW5jZSwgZnMsIHByZXZpZXdTY3JpcHQsIFxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcnVudGltZUluZm8pIHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBfaW5zdGFuY2U7XG4gICAgICAgIHRoaXMuX3J1bnRpbWVJbmZvID0gX3J1bnRpbWVJbmZvO1xuICAgICAgICB0aGlzLmZzID0gbmV3IEZpbGVTeXN0ZW1BUElDbGllbnQoZnMpO1xuICAgICAgICAvLyBmb3J3YXJkIHRoZSBjcmVkZW50aWFscyB0byB3ZWJjb250YWluZXIgaWYgbmVlZGVkXG4gICAgICAgIGlmIChhdXRoU3RhdGUuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlRnJvbVRva2VuQ2hhbmdlZExpc3RlbmVyID0gYWRkQWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXIoKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc2V0Q3JlZGVudGlhbHMoeyBhY2Nlc3NUb2tlbiwgZWRpdG9yT3JpZ2luOiBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGF1dGhTdGF0ZS5hdXRoQ29tcGxldGUucHJvbWlzZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdG9ybkRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3NlcnRBdXRoVG9rZW5zKGF1dGhTdGF0ZS50b2tlbnMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luc3RhbmNlLnNldENyZWRlbnRpYWxzKHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGF1dGhTdGF0ZS50b2tlbnMuYWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICBlZGl0b3JPcmlnaW46IGF1dGhTdGF0ZS5lZGl0b3JPcmlnaW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSgpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHByaW50IHRoZSBlcnJvciBhcyB0aGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiB3ZWJjb250YWluZXJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNwYXduKGNvbW1hbmQsIG9wdGlvbnNPckFyZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSBbXTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9uc09yQXJncykpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBvcHRpb25zT3JBcmdzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckFyZ3M7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IG91dHB1dFN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSgpO1xuICAgICAgICBpZiAob3B0aW9ucz8ub3V0cHV0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RyZWFtV2l0aFB1c2goKTtcbiAgICAgICAgICAgIG91dHB1dCA9IHJlc3VsdC5wdXNoO1xuICAgICAgICAgICAgb3V0cHV0U3RyZWFtID0gcmVzdWx0LnN0cmVhbTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3Rkb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3Rkb3V0U3RyZWFtO1xuICAgICAgICBsZXQgc3RkZXJyID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3RkZXJyU3RyZWFtO1xuICAgICAgICBjb25zdCB3cmFwcGVkT3V0cHV0ID0gcHJveHlMaXN0ZW5lcihiaW5hcnlMaXN0ZW5lcihvdXRwdXQpKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZFN0ZG91dCA9IHByb3h5TGlzdGVuZXIoYmluYXJ5TGlzdGVuZXIoc3Rkb3V0KSk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRTdGRlcnIgPSBwcm94eUxpc3RlbmVyKGJpbmFyeUxpc3RlbmVyKHN0ZGVycikpO1xuICAgICAgICBjb25zdCBwcm9jZXNzID0gYXdhaXQgdGhpcy5faW5zdGFuY2UucnVuKHtcbiAgICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgY3dkOiBvcHRpb25zPy5jd2QsXG4gICAgICAgICAgICBlbnY6IG9wdGlvbnM/LmVudixcbiAgICAgICAgICAgIHRlcm1pbmFsOiBvcHRpb25zPy50ZXJtaW5hbCxcbiAgICAgICAgfSwgd3JhcHBlZFN0ZG91dCwgd3JhcHBlZFN0ZGVyciwgd3JhcHBlZE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgV2ViQ29udGFpbmVyUHJvY2Vzc0ltcGwocHJvY2Vzcywgb3V0cHV0U3RyZWFtLCBzdGRvdXRTdHJlYW0sIHN0ZGVyclN0cmVhbSk7XG4gICAgfVxuICAgIGFzeW5jIGV4cG9ydChwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBmb3JtYXQ6IG9wdGlvbnM/LmZvcm1hdCA/PyAnanNvbicsXG4gICAgICAgICAgICBpbmNsdWRlczogb3B0aW9ucz8uaW5jbHVkZXMsXG4gICAgICAgICAgICBleGNsdWRlczogb3B0aW9ucz8uZXhjbHVkZXMsXG4gICAgICAgICAgICBleHRlcm5hbDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW5zdGFuY2Uuc2VyaWFsaXplKHBhdGgsIHNlcmlhbGl6ZU9wdGlvbnMpO1xuICAgICAgICBpZiAoc2VyaWFsaXplT3B0aW9ucy5mb3JtYXQgPT09ICdqc29uJykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUocmVzdWx0KSk7XG4gICAgICAgICAgICByZXR1cm4gdG9FeHRlcm5hbEZpbGVTeXN0ZW1UcmVlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoZXZlbnQgPT09ICdwcmV2aWV3LW1lc3NhZ2UnKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICAgICAgICBsaXN0ZW5lciA9ICgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1ByZXZpZXdNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTGlzdGVuZXIobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBsaXN0ZW5lcjogd3JhcHBlZCwgc3Vic2NyaWJlIH0gPSBzeW5jU3Vic2NyaXB0aW9uKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZSh0aGlzLl9pbnN0YW5jZS5vbihldmVudCwgQ29tbGluay5wcm94eSh3cmFwcGVkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3VudHMgYSB0cmVlIG9mIGZpbGVzIGludG8gdGhlIGZpbGVzeXN0ZW0uIFRoaXMgY2FuIGJlIHNwZWNpZmllZCBhcyBhIHRyZWUgb2JqZWN0ICh7QGxpbmsgRmlsZVN5c3RlbVRyZWV9KVxuICAgICAqIG9yIGFzIGEgYmluYXJ5IHNuYXBzaG90IGdlbmVyYXRlZCBieSBbYEB3ZWJjb250YWluZXIvc25hcHNob3RgXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9Ad2ViY29udGFpbmVyL3NuYXBzaG90KS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzbmFwc2hvdE9yVHJlZSAtIEEgdHJlZSBvZiBmaWxlcywgb3IgYSBiaW5hcnkgc25hcHNob3QuIE5vdGUgdGhhdCBiaW5hcnkgcGF5bG9hZHMgd2lsbCBiZSB0cmFuc2ZlcnJlZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5tb3VudFBvaW50IC0gU3BlY2lmaWVzIGEgbmVzdGVkIHBhdGggd2hlcmUgdGhlIHRyZWUgc2hvdWxkIGJlIG1vdW50ZWQuXG4gICAgICovXG4gICAgbW91bnQoc25hcHNob3RPclRyZWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHNuYXBzaG90T3JUcmVlIGluc3RhbmNlb2YgVWludDhBcnJheVxuICAgICAgICAgICAgPyBzbmFwc2hvdE9yVHJlZVxuICAgICAgICAgICAgOiBzbmFwc2hvdE9yVHJlZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICAgICAgICAgICAgICAgPyBuZXcgVWludDhBcnJheShzbmFwc2hvdE9yVHJlZSlcbiAgICAgICAgICAgICAgICA6IGVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRvSW50ZXJuYWxGaWxlU3lzdGVtVHJlZShzbmFwc2hvdE9yVHJlZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlLmxvYWRGaWxlcyhDb21saW5rLnRyYW5zZmVyKHBheWxvYWQsIFtwYXlsb2FkLmJ1ZmZlcl0pLCB7XG4gICAgICAgICAgICBtb3VudFBvaW50czogb3B0aW9ucz8ubW91bnRQb2ludCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIGN1c3RvbSBzY3JpcHQgdG8gYmUgaW5qZWN0ZWQgaW50byBhbGwgcHJldmlld3MuIFdoZW4gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQsIGV2ZXJ5XG4gICAgICogZnV0dXJlIHBhZ2UgcmVsb2FkIHdpbGwgY29udGFpbiB0aGUgcHJvdmlkZWQgc2NyaXB0IHRhZyBvbiBhbGwgSFRNTCByZXNwb25zZXMuXG4gICAgICpcbiAgICAgKiBOb3RlOlxuICAgICAqXG4gICAgICogV2hlbiB0aGlzIGZ1bmN0aW9uIHJlc29sdmVzLCBldmVyeSBwcmV2aWV3IHJlbG9hZGVkIF9hZnRlcl8gd2lsbCBoYXZlIHRoZSBuZXcgc2NyaXB0LlxuICAgICAqIEV4aXN0aW5nIHByZXZpZXcgaGF2ZSB0byBiZSBleHBsaWNpdGVseSByZWxvYWRlZC5cbiAgICAgKlxuICAgICAqIFRvIHJlbG9hZCBhIHByZXZpZXcgeW91IGNhbiB1c2UgYHJlbG9hZFByZXZpZXdgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjcmlwdFNyYyBTb3VyY2UgZm9yIHRoZSBzY3JpcHQgdGFnLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gZGVmaW5lIHdoaWNoIHR5cGUgb2Ygc2NyaXB0IHRoaXMgaXMuXG4gICAgICovXG4gICAgc2V0UHJldmlld1NjcmlwdChzY3JpcHRTcmMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlLnNldFByZXZpZXdTY3JpcHQoc2NyaXB0U3JjLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIGBQQVRIYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBmb3IgcHJvY2Vzc2VzIHN0YXJ0ZWQgdGhyb3VnaCB7QGxpbmsgc3Bhd259LlxuICAgICAqL1xuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcnVudGltZUluZm8ucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZ1bGwgcGF0aCB0byB0aGUgd29ya2luZyBkaXJlY3RvcnkgKHNlZSB7QGxpbmsgRmlsZVN5c3RlbUFQSX0pLlxuICAgICAqL1xuICAgIGdldCB3b3JrZGlyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcnVudGltZUluZm8uY3dkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgV2ViQ29udGFpbmVyIGluc3RhbmNlLCB0dXJuaW5nIGl0IHVudXNhYmxlLCBhbmQgcmVsZWFzZXMgaXRzIHJlc291cmNlcy4gQWZ0ZXIgdGhpcyxcbiAgICAgKiBhIG5ldyBXZWJDb250YWluZXIgaW5zdGFuY2UgY2FuIGJlIG9idGFpbmVkIGJ5IGNhbGxpbmcge0BsaW5rIFdlYkNvbnRhaW5lci5ib290IHwgYGJvb3RgfS5cbiAgICAgKlxuICAgICAqIEFsbCBlbnRpdGllcyBkZXJpdmVkIGZyb20gdGhpcyBpbnN0YW5jZSAoZS5nLiBwcm9jZXNzZXMsIHRoZSBmaWxlIHN5c3RlbSwgZXRjLikgYWxzbyBiZWNvbWUgdW51c2FibGVcbiAgICAgKiBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIHRlYXJkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5fdG9ybkRvd24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViQ29udGFpbmVyIGFscmVhZHkgdG9ybiBkb3duJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdG9ybkRvd24gPSB0cnVlO1xuICAgICAgICB0aGlzLl91bnN1YnNjcmliZUZyb21Ub2tlbkNoYW5nZWRMaXN0ZW5lcigpO1xuICAgICAgICBjb25zdCB0ZWFyZG93bkZuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZzLl90ZWFyZG93bigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luc3RhbmNlLnRlYXJkb3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVtDb21saW5rLnJlbGVhc2VQcm94eV0oKTtcbiAgICAgICAgICAgICAgICBpZiAoV2ViQ29udGFpbmVyLl9pbnN0YW5jZSA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBXZWJDb250YWluZXIuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFdlYkNvbnRhaW5lci5fdGVhcmRvd25Qcm9taXNlID0gdGVhcmRvd25GbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCb290cyBhIFdlYkNvbnRhaW5lci4gT25seSBhIHNpbmdsZSBpbnN0YW5jZSBvZiBXZWJDb250YWluZXIgY2FuIGJlIGJvb3RlZCBjb25jdXJyZW50bHlcbiAgICAgKiAoc2VlIHtAbGluayBXZWJDb250YWluZXIudGVhcmRvd24gfCBgdGVhcmRvd25gfSkuXG4gICAgICpcbiAgICAgKiBCb290aW5nIFdlYkNvbnRhaW5lciBpcyBhbiBleHBlbnNpdmUgb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBib290KG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBhd2FpdCB0aGlzLl90ZWFyZG93blByb21pc2U7XG4gICAgICAgIFdlYkNvbnRhaW5lci5fdGVhcmRvd25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgY29uc3QgeyB3b3JrZGlyTmFtZSB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKHdpbmRvdy5jcm9zc09yaWdpbklzb2xhdGVkICYmIG9wdGlvbnMuY29lcCA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEEgQ3Jvc3MtT3JpZ2luLUVtYmVkZGVyLVBvbGljeSBoZWFkZXIgaXMgcmVxdWlyZWQgaW4gY3Jvc3Mgb3JpZ2luIGlzb2xhdGVkIGVudmlyb25tZW50cy5cXG5TZXQgdGhlICdjb2VwJyBvcHRpb24gdG8gJ3JlcXVpcmUtY29ycCcuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdvcmtkaXJOYW1lPy5pbmNsdWRlcygnLycpIHx8IHdvcmtkaXJOYW1lID09PSAnLi4nIHx8IHdvcmtkaXJOYW1lID09PSAnLicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignd29ya2Rpck5hbWUgc2hvdWxkIGJlIGEgdmFsaWQgZm9sZGVyIG5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaWduYWwgdGhhdCBib290IHdhcyBjYWxsZWQgdG8gYXV0aCBtb2R1bGUgYXMgY2FsbGluZyBhdXRoLmluaXQgYWZ0ZXIgYm9vdCBpcyBsaWtlbHkgaW5jb3JyZWN0XG4gICAgICAgIGF1dGhTdGF0ZS5ib290Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gdHJ5IHRvIFwiYWNxdWlyZSB0aGUgbG9ja1wiLCBpLmUuIHdhaXQgZm9yIGFueSBvbmdvaW5nIGJvb3QgcmVxdWVzdCB0byBmaW5pc2hcbiAgICAgICAgd2hpbGUgKGJvb3RQcm9taXNlKSB7XG4gICAgICAgICAgICBhd2FpdCBib290UHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoV2ViQ29udGFpbmVyLl9pbnN0YW5jZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IGEgc2luZ2xlIFdlYkNvbnRhaW5lciBpbnN0YW5jZSBjYW4gYmUgYm9vdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5zdGFuY2VQcm9taXNlID0gdW5zeW5jaHJvbml6ZWRCb290KG9wdGlvbnMpO1xuICAgICAgICAvLyB0aGUgXCJsb2NrXCIgaXMgYSBwcm9taXNlIGZvciB0aGUgb25nb2luZyBib290IHRoYXQgbmV2ZXIgZmFpbHNcbiAgICAgICAgYm9vdFByb21pc2UgPSBpbnN0YW5jZVByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gYXdhaXQgaW5zdGFuY2VQcm9taXNlO1xuICAgICAgICAgICAgV2ViQ29udGFpbmVyLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gcmVsZWFzZSB0aGUgXCJsb2NrXCJcbiAgICAgICAgICAgIGJvb3RQcm9taXNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ29uZmlndXJlIGFuIEFQSSBrZXkgdG8gYmUgdXNlZCBmb3IgdGhpcyBpbnN0YW5jZSBvZiBXZWJDb250YWluZXIuXG4gKlxuICogQHBhcmFtIGtleSBXZWJDb250YWluZXIgQVBJIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZUFQSUtleShrZXkpIHtcbiAgICBpZiAoYXV0aFN0YXRlLmJvb3RDYWxsZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgY29uZmlndXJlQVBJS2V5YCBzaG91bGQgYWx3YXlzIGJlIGNhbGxlZCBiZWZvcmUgYFdlYkNvbnRhaW5lci5ib290YCcpO1xuICAgIH1cbiAgICBpZnJhbWVTZXR0aW5ncy5zZXRRdWVyeVBhcmFtKCdjbGllbnRfaWQnLCBrZXkpO1xufVxuY29uc3QgRElSX0VOVFJZX1RZUEVfRklMRSA9IDE7XG5jb25zdCBESVJfRU5UUllfVFlQRV9ESVIgPSAyO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgRGlyRW50SW1wbCB7XG4gICAgbmFtZTtcbiAgICBfdHlwZTtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBfdHlwZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl90eXBlID0gX3R5cGU7XG4gICAgfVxuICAgIGlzRmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGUgPT09IERJUl9FTlRSWV9UWVBFX0ZJTEU7XG4gICAgfVxuICAgIGlzRGlyZWN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZSA9PT0gRElSX0VOVFJZX1RZUEVfRElSO1xuICAgIH1cbn1cbmNsYXNzIEZTV2F0Y2hlciB7XG4gICAgX2FwaUNsaWVudDtcbiAgICBfcGF0aDtcbiAgICBfb3B0aW9ucztcbiAgICBfbGlzdGVuZXI7XG4gICAgX3dyYXBwZWRMaXN0ZW5lcjtcbiAgICBfd2F0Y2hlcjtcbiAgICBfY2xvc2VkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3IoX2FwaUNsaWVudCwgX3BhdGgsIF9vcHRpb25zLCBfbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYXBpQ2xpZW50ID0gX2FwaUNsaWVudDtcbiAgICAgICAgdGhpcy5fcGF0aCA9IF9wYXRoO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyID0gX2xpc3RlbmVyO1xuICAgICAgICB0aGlzLl9hcGlDbGllbnQuX3dhdGNoZXJzLmFkZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fd3JhcHBlZExpc3RlbmVyID0gKGV2ZW50LCBmaWxlbmFtZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyICYmICF0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0ZW5lcihldmVudCwgZmlsZW5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9hcGlDbGllbnQuX2ZzXG4gICAgICAgICAgICAud2F0Y2godGhpcy5fcGF0aCwgdGhpcy5fb3B0aW9ucywgcHJveHlMaXN0ZW5lcih0aGlzLl93cmFwcGVkTGlzdGVuZXIpKVxuICAgICAgICAgICAgLnRoZW4oKF93YXRjaGVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl93YXRjaGVyID0gX3dhdGNoZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RlYXJkb3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH1cbiAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9hcGlDbGllbnQuX3dhdGNoZXJzLmRlbGV0ZSh0aGlzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3RlYXJkb3duKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgX3RlYXJkb3duKCkge1xuICAgICAgICBhd2FpdCB0aGlzLl93YXRjaGVyPy5jbG9zZSgpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fd2F0Y2hlcj8uW0NvbWxpbmsucmVsZWFzZVByb3h5XSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBXZWJDb250YWluZXJQcm9jZXNzSW1wbCB7XG4gICAgb3V0cHV0O1xuICAgIGlucHV0O1xuICAgIGV4aXQ7XG4gICAgX3Byb2Nlc3M7XG4gICAgc3Rkb3V0O1xuICAgIHN0ZGVycjtcbiAgICBjb25zdHJ1Y3Rvcihwcm9jZXNzLCBvdXRwdXQsIHN0ZG91dCwgc3RkZXJyKSB7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgICAgICB0aGlzLl9wcm9jZXNzID0gcHJvY2VzcztcbiAgICAgICAgdGhpcy5pbnB1dCA9IG5ldyBXcml0YWJsZVN0cmVhbSh7XG4gICAgICAgICAgICB3cml0ZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHByb21pc2UgaXMgbm90IHN1cHBvc2VkIHRvIGZhaWwgYW55d2F5XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0UHJvY2VzcygpXG4gICAgICAgICAgICAgICAgICAgID8ud3JpdGUoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leGl0ID0gdGhpcy5fb25FeGl0KCk7XG4gICAgICAgIHRoaXMuc3Rkb3V0ID0gc3Rkb3V0O1xuICAgICAgICB0aGlzLnN0ZGVyciA9IHN0ZGVycjtcbiAgICB9XG4gICAga2lsbCgpIHtcbiAgICAgICAgdGhpcy5fcHJvY2Vzcz8ua2lsbCgpO1xuICAgIH1cbiAgICByZXNpemUoZGltZW5zaW9ucykge1xuICAgICAgICB0aGlzLl9nZXRQcm9jZXNzKCk/LnJlc2l6ZShkaW1lbnNpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgX29uRXhpdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9wcm9jZXNzLm9uRXhpdDtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3M/LltDb21saW5rLnJlbGVhc2VQcm94eV0oKTtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRQcm9jZXNzKCkge1xuICAgICAgICBpZiAodGhpcy5fcHJvY2VzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoaXMgcHJvY2VzcyBhbHJlYWR5IGV4aXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEZpbGVTeXN0ZW1BUElDbGllbnQge1xuICAgIF9mcztcbiAgICBfd2F0Y2hlcnMgPSBuZXcgU2V0KFtdKTtcbiAgICBjb25zdHJ1Y3Rvcihmcykge1xuICAgICAgICB0aGlzLl9mcyA9IGZzO1xuICAgIH1cbiAgICBybSguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcy5ybSguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgcmVhZEZpbGUocGF0aCwgZW5jb2RpbmcpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ZzLnJlYWRGaWxlKHBhdGgsIGVuY29kaW5nKTtcbiAgICB9XG4gICAgYXN5bmMgcmVuYW1lKG9sZFBhdGgsIG5ld1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ZzLnJlbmFtZShvbGRQYXRoLCBuZXdQYXRoKTtcbiAgICB9XG4gICAgYXN5bmMgd3JpdGVGaWxlKHBhdGgsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBkYXRhLmJ1ZmZlci5zbGljZShkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZU9mZnNldCArIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBkYXRhID0gQ29tbGluay50cmFuc2ZlcihuZXcgVWludDhBcnJheShidWZmZXIpLCBbYnVmZmVyXSk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5fZnMud3JpdGVGaWxlKHBhdGgsIGRhdGEsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyByZWFkZGlyKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fZnMucmVhZGRpcihwYXRoLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGlzU3RyaW5nQXJyYXkocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNUeXBlZEFycmF5Q29sbGVjdGlvbihyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSByZXN1bHQubWFwKChlbnRyeSkgPT4gbmV3IERpckVudEltcGwoZW50cnkubmFtZSwgZW50cnlbJ1N5bWJvbCh0eXBlKSddKSk7XG4gICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgIH1cbiAgICBhc3luYyBta2RpcihwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9mcy5ta2RpcihwYXRoLCBvcHRpb25zKTtcbiAgICB9XG4gICAgd2F0Y2gocGF0aCwgb3B0aW9ucywgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEZTV2F0Y2hlcih0aGlzLCBwYXRoLCBvcHRpb25zLCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jIF90ZWFyZG93bigpIHtcbiAgICAgICAgdGhpcy5fZnNbQ29tbGluay5yZWxlYXNlUHJveHldKCk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi50aGlzLl93YXRjaGVyc10ubWFwKCh3YXRjaGVyKSA9PiB3YXRjaGVyLmNsb3NlKCkpKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiB1bnN5bmNocm9uaXplZEJvb3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc2VydmVyUHJvbWlzZSB9ID0gc2VydmVyRmFjdG9yeShvcHRpb25zKTtcbiAgICBjb25zdCBzZXJ2ZXIgPSBhd2FpdCBzZXJ2ZXJQcm9taXNlO1xuICAgIGNvbnN0IGluc3RhbmNlID0gYXdhaXQgc2VydmVyLmJ1aWxkKHtcbiAgICAgICAgaG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICAgIHZlcnNpb246IFwiMS42LjFcIixcbiAgICAgICAgd29ya2Rpck5hbWU6IG9wdGlvbnMud29ya2Rpck5hbWUsXG4gICAgICAgIGZvcndhcmRQcmV2aWV3RXJyb3JzOiBvcHRpb25zLmZvcndhcmRQcmV2aWV3RXJyb3JzLFxuICAgIH0pO1xuICAgIGNvbnN0IFtmcywgcHJldmlld1NjcmlwdCwgcnVudGltZUluZm9dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBpbnN0YW5jZS5mcygpLFxuICAgICAgICBpbnN0YW5jZS5wcmV2aWV3U2NyaXB0KCksXG4gICAgICAgIGluc3RhbmNlLnJ1bnRpbWVJbmZvKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIG5ldyBXZWJDb250YWluZXIoaW5zdGFuY2UsIGZzLCBwcmV2aWV3U2NyaXB0LCBydW50aW1lSW5mbyk7XG59XG5mdW5jdGlvbiBiaW5hcnlMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGRlY29kZXIuZGVjb2RlKGRhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHByb3h5TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gQ29tbGluay5wcm94eShsaXN0ZW5lcik7XG59XG5mdW5jdGlvbiBzZXJ2ZXJGYWN0b3J5KG9wdGlvbnMpIHtcbiAgICBpZiAoY2FjaGVkU2VydmVyUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNvZXAgIT09IGNhY2hlZEJvb3RPcHRpb25zLmNvZXApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBib290IFdlYkNvbnRhaW5lciB3aXRoICdjb2VwOiAke29wdGlvbnMuY29lcH0nYCk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEZpcnN0IGJvb3QgaGFkICdjb2VwOiAke2NhY2hlZEJvb3RPcHRpb25zLmNvZXB9JywgbmV3IHNldHRpbmdzIHdpbGwgbm90IHRha2UgZWZmZWN0IWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNlcnZlclByb21pc2U6IGNhY2hlZFNlcnZlclByb21pc2UgfTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuY29lcCkge1xuICAgICAgICBpZnJhbWVTZXR0aW5ncy5zZXRRdWVyeVBhcmFtKCdjb2VwJywgb3B0aW9ucy5jb2VwKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZXhwZXJpbWVudGFsTm9kZSkge1xuICAgICAgICBpZnJhbWVTZXR0aW5ncy5zZXRRdWVyeVBhcmFtKCdleHBlcmltZW50YWxfbm9kZScsICcxJyk7XG4gICAgfVxuICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FsbG93JywgJ2Nyb3NzLW9yaWdpbi1pc29sYXRlZCcpO1xuICAgIGNvbnN0IHVybCA9IGlmcmFtZVNldHRpbmdzLnVybDtcbiAgICBpZnJhbWUuc3JjID0gdXJsLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgeyBvcmlnaW4gfSA9IHVybDtcbiAgICBjYWNoZWRCb290T3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgIGNhY2hlZFNlcnZlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBvbk1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW4gIT09IG9yaWdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZXZlbnQ7XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnaW5pdCcpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKENvbWxpbmsud3JhcChldmVudC5wb3J0c1swXSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICd3YXJuaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGVbZGF0YS5sZXZlbF0uY2FsbChjb25zb2xlLCBkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGlmcmFtZSwgbnVsbCk7XG4gICAgcmV0dXJuIHsgc2VydmVyUHJvbWlzZTogY2FjaGVkU2VydmVyUHJvbWlzZSB9O1xufVxuZnVuY3Rpb24gaXNTdHJpbmdBcnJheShsaXN0KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBsaXN0WzBdID09PSAnc3RyaW5nJztcbn1cbmZ1bmN0aW9uIGlzVHlwZWRBcnJheUNvbGxlY3Rpb24obGlzdCkge1xuICAgIHJldHVybiBsaXN0WzBdIGluc3RhbmNlb2YgVWludDhBcnJheTtcbn1cbmZ1bmN0aW9uIHN0cmVhbVdpdGhQdXNoKCkge1xuICAgIGxldCBjb250cm9sbGVyID0gbnVsbDtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBzdGFydChjb250cm9sbGVyXykge1xuICAgICAgICAgICAgY29udHJvbGxlciA9IGNvbnRyb2xsZXJfO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHB1c2ggPSAoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlcj8uY2xvc2UoKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4geyBzdHJlYW0sIHB1c2ggfTtcbn1cbmZ1bmN0aW9uIHN5bmNTdWJzY3JpcHRpb24obGlzdGVuZXIpIHtcbiAgICBsZXQgc3RvcHBlZCA9IGZhbHNlO1xuICAgIGxldCB1bnN1YnNjcmliZSA9ICgpID0+IHsgfTtcbiAgICBjb25zdCB3cmFwcGVkID0gKCguLi5hcmdzKSA9PiB7XG4gICAgICAgIGlmIChzdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3Vic2NyaWJlKHByb21pc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbigodW5zdWJzY3JpYmVfKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZV87XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGxpc3RlbmVyOiB3cmFwcGVkLFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TypedEventTarget: () => (/* binding */ TypedEventTarget)\n/* harmony export */ });\nclass TypedEventTarget {\n    _bus = new EventTarget();\n    listen(listener) {\n        function wrappedListener(event) {\n            listener(event.data);\n        }\n        this._bus.addEventListener('message', wrappedListener);\n        return () => this._bus.removeEventListener('message', wrappedListener);\n    }\n    fireEvent(data) {\n        this._bus.dispatchEvent(new MessageEvent('message', { data }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9UeXBlZEV2ZW50VGFyZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxNQUFNO0FBQ3BFO0FBQ0EiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvVHlwZWRFdmVudFRhcmdldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVHlwZWRFdmVudFRhcmdldCB7XG4gICAgX2J1cyA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgIGxpc3RlbihsaXN0ZW5lcikge1xuICAgICAgICBmdW5jdGlvbiB3cmFwcGVkTGlzdGVuZXIoZXZlbnQpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J1cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgd3JhcHBlZExpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuX2J1cy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgd3JhcHBlZExpc3RlbmVyKTtcbiAgICB9XG4gICAgZmlyZUV2ZW50KGRhdGEpIHtcbiAgICAgICAgdGhpcy5fYnVzLmRpc3BhdGNoRXZlbnQobmV3IE1lc3NhZ2VFdmVudCgnbWVzc2FnZScsIHsgZGF0YSB9KSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/auth-state.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertAuthTokens: () => (/* binding */ assertAuthTokens),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   authState: () => (/* binding */ authState)\n/* harmony export */ });\n/* harmony import */ var _tokens_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _code_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./code.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\");\n/* harmony import */ var _reset_promise_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./reset-promise.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\n\n\n\n\n/**\n * @internal\n */\nconst authState = {\n    initialized: false,\n    bootCalled: false,\n    authComplete: (0,_reset_promise_js__WEBPACK_IMPORTED_MODULE_4__.resettablePromise)(),\n    clientId: '',\n    oauthScope: '',\n    broadcastChannel: null,\n    get editorOrigin() {\n        return _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin;\n    },\n    tokens: null,\n};\nconst authFailedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nconst loggedOutListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nfunction broadcastMessage(message) {\n    if (!authState.broadcastChannel) {\n        return;\n    }\n    authState.broadcastChannel.postMessage(message);\n    // check if we are in a popup mode\n    if (localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME) === 'true' && message.type !== 'auth-logout') {\n        localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME);\n        // wait a tick to make sure the posted message has been sent\n        setTimeout(() => {\n            window.close();\n        });\n    }\n}\nconst auth = {\n    init({ editorOrigin, clientId, scope }) {\n        if (authState.initialized) {\n            throw new Error('Init should only be called once');\n        }\n        let enterprise = true;\n        if (enterprise && authState.bootCalled) {\n            throw new Error('`auth.init` should always be called before `WebContainer.boot`');\n        }\n        authState.initialized = true;\n        authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n        authState.clientId = clientId;\n        authState.oauthScope = scope;\n        authState.broadcastChannel = new BroadcastChannel(_constants_js__WEBPACK_IMPORTED_MODULE_1__.BROADCAST_CHANNEL_NAME);\n        // configure iframe url\n        _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.setQueryParam('client_id', clientId);\n        if (editorOrigin) {\n            _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin = new URL(editorOrigin).origin;\n        }\n        loggedOutListeners.listen(() => authState.authComplete.reset());\n        // if authentication or logout are done in another page, we want to reflect the state on this page as well\n        authState.broadcastChannel.addEventListener('message', onChannelMessage);\n        async function onChannelMessage(event) {\n            const typedEvent = event.data;\n            if (typedEvent.type === 'auth-complete') {\n                authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n                // we ignore the possible error here because they can't have expired just yet\n                await authState.tokens.activate(onFailedTokenRefresh);\n                authState.authComplete.resolve();\n                return;\n            }\n            if (typedEvent.type === 'auth-failed') {\n                authFailedListeners.fireEvent(typedEvent);\n                return;\n            }\n            if (typedEvent.type === 'auth-logout') {\n                loggedOutListeners.fireEvent();\n                return;\n            }\n        }\n        if (authState.tokens) {\n            const tokens = authState.tokens;\n            if (tokens.origin === authState.editorOrigin) {\n                /**\n                 * Here we assume that the refresh token never expires which\n                 * might not be correct. If that is the case though, we will\n                 * emit a 'logged-out' event to signal that the user has been\n                 * logged out, which could also happen at a later time anyway.\n                 *\n                 * Because this flow is done entirely locally, we do not broadcast\n                 * anything to the other tabs. They should be performing a similar\n                 * check.\n                 */\n                (async () => {\n                    const success = await tokens.activate(onFailedTokenRefresh);\n                    if (!success) {\n                        // if we got new token in the meantime we discard this error\n                        if (authState.tokens !== tokens) {\n                            return;\n                        }\n                        loggedOutListeners.fireEvent();\n                        return;\n                    }\n                    authState.authComplete.resolve();\n                })();\n                return { status: 'authorized' };\n            }\n            (0,_tokens_js__WEBPACK_IMPORTED_MODULE_0__.clearTokensInStorage)();\n            authState.tokens = null;\n        }\n        const locationURL = new URL(window.location.href);\n        const { searchParams } = locationURL;\n        const updateURL = () => window.history.replaceState({}, document.title, locationURL);\n        // check for errors first, aka the user declined the authorisation or stackblitz did\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR)) {\n            const error = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            const description = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            updateURL();\n            broadcastMessage({ type: 'auth-failed', error, description });\n            return { status: 'auth-failed', error, description };\n        }\n        // if there's an auth code\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE)) {\n            const authCode = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            const editorOrigin = authState.editorOrigin;\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            updateURL();\n            const codeVerifier = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            if (!codeVerifier) {\n                return { status: 'need-auth' };\n            }\n            localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromAuthCode({\n                editorOrigin,\n                clientId: authState.clientId,\n                authCode,\n                codeVerifier,\n                redirectUri: defaultRedirectUri(),\n            })\n                .then(async (tokens) => {\n                authState.tokens = tokens;\n                assertAuthTokens(authState.tokens);\n                const success = await authState.tokens.activate(onFailedTokenRefresh);\n                // if authentication failed we throw, and we'll mark auth as failed\n                if (!success) {\n                    throw new Error();\n                }\n                authState.authComplete.resolve();\n                broadcastMessage({ type: 'auth-complete' });\n            })\n                .catch((error) => {\n                // this should never happen unless the rails app is now down for some reason?\n                console.error(error);\n                // treat it as a logged out event so that the user can retry to login\n                loggedOutListeners.fireEvent();\n                broadcastMessage({ type: 'auth-logout' });\n            });\n            return { status: 'authorized' };\n        }\n        return { status: 'need-auth' };\n    },\n    async startAuthFlow({ popup } = {}) {\n        if (!authState.initialized) {\n            throw new Error('auth.init must be called first');\n        }\n        if (popup) {\n            localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME, 'true');\n            const height = 500;\n            const width = 620;\n            const left = window.screenLeft + (window.outerWidth - width) / 2;\n            const top = window.screenTop + (window.outerHeight - height) / 2;\n            window.open(await generateOAuthRequest(), '_blank', `popup,width=${width},height=${height},left=${left},top=${top}`);\n        }\n        else {\n            window.location.href = await generateOAuthRequest();\n        }\n    },\n    async logout({ ignoreRevokeError } = {}) {\n        await authState.tokens?.revoke(authState.clientId, ignoreRevokeError ?? false);\n        loggedOutListeners.fireEvent();\n        broadcastMessage({ type: 'auth-logout' });\n    },\n    loggedIn() {\n        return authState.authComplete.promise;\n    },\n    on(event, listener) {\n        switch (event) {\n            case 'auth-failed': {\n                return authFailedListeners.listen(listener);\n            }\n            case 'logged-out': {\n                return loggedOutListeners.listen(listener);\n            }\n            default: {\n                throw new Error(`Unsupported event type '${event}'.`);\n            }\n        }\n    },\n};\nfunction onFailedTokenRefresh() {\n    loggedOutListeners.fireEvent();\n    broadcastMessage({ type: 'auth-logout' });\n}\nfunction defaultRedirectUri() {\n    return window.location.href;\n}\nasync function generateOAuthRequest() {\n    const codeVerifier = (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.newCodeVerifier)();\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME, codeVerifier);\n    const codeChallenge = await (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.S256)(codeVerifier);\n    const url = new URL('/oauth/authorize', authState.editorOrigin);\n    const { searchParams } = url;\n    searchParams.append('response_type', 'code');\n    searchParams.append('client_id', authState.clientId);\n    searchParams.append('redirect_uri', defaultRedirectUri());\n    searchParams.append('scope', authState.oauthScope);\n    searchParams.append('code_challenge', codeChallenge);\n    searchParams.append('code_challenge_method', 'S256');\n    return url.toString();\n}\n/**\n * @internal\n */\nfunction assertAuthTokens(tokens) {\n    if (!tokens) {\n        throw new Error('Oops! Tokens is not defined when it always should be.');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9hdXRoLXN0YXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyRDtBQUMwSDtBQUNwSTtBQUNDO0FBQ0s7QUFDRTtBQUN6RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0Isb0VBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwREFBYztBQUM3QixLQUFLO0FBQ0w7QUFDQTtBQUNBLGdDQUFnQyxrRUFBZ0I7QUFDaEQsK0JBQStCLGtFQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNkRBQWtCO0FBQy9DLGdDQUFnQyw2REFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQLFdBQVcsK0JBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOENBQU07QUFDakM7QUFDQTtBQUNBLDBEQUEwRCxpRUFBc0I7QUFDaEY7QUFDQSxRQUFRLDBEQUFjO0FBQ3RCO0FBQ0EsWUFBWSwwREFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHlCQUF5QjtBQUN6QjtBQUNBLFlBQVksZ0VBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CLDhEQUE4RDtBQUM5RDtBQUNBLDZCQUE2Qiw2REFBa0I7QUFDL0MsMkNBQTJDLDZEQUFrQjtBQUM3RCxpREFBaUQseUVBQThCO0FBQy9FLGdDQUFnQyw2REFBa0I7QUFDbEQsZ0NBQWdDLHlFQUE4QjtBQUM5RDtBQUNBLCtCQUErQix5Q0FBeUM7QUFDeEUscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQXNCO0FBQ25ELDhDQUE4QyxpRUFBc0I7QUFDcEU7QUFDQSxnQ0FBZ0MsaUVBQXNCO0FBQ3REO0FBQ0Esc0RBQXNELHFFQUEwQjtBQUNoRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLG9DQUFvQyxxRUFBMEI7QUFDOUQsWUFBWSw4Q0FBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1QkFBdUI7QUFDMUQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscUJBQXFCO0FBQ3hELGFBQWE7QUFDYixxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMLDBCQUEwQixRQUFRLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkRBQWtCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLE1BQU0sVUFBVSxPQUFPLFFBQVEsS0FBSyxPQUFPLElBQUk7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLG9CQUFvQixJQUFJO0FBQzNDO0FBQ0E7QUFDQSwyQkFBMkIscUJBQXFCO0FBQ2hELEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxNQUFNO0FBQ2pFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFlO0FBQ3hDLHlCQUF5QixxRUFBMEI7QUFDbkQsZ0NBQWdDLDhDQUFJO0FBQ3BDO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L2ludGVybmFsL2F1dGgtc3RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9rZW5zLCBjbGVhclRva2Vuc0luU3RvcmFnZSB9IGZyb20gJy4vdG9rZW5zLmpzJztcbmltcG9ydCB7IFNFQVJDSF9QQVJBTV9BVVRIX0NPREUsIFNFQVJDSF9QQVJBTV9FUlJPUiwgU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUsIEJST0FEQ0FTVF9DSEFOTkVMX05BTUUsIFNUT1JBR0VfUE9QVVBfTkFNRSwgU0VBUkNIX1BBUkFNX0VSUk9SX0RFU0NSSVBUSU9OLCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGlmcmFtZVNldHRpbmdzIH0gZnJvbSAnLi9pZnJhbWUtdXJsLmpzJztcbmltcG9ydCB7IFMyNTYsIG5ld0NvZGVWZXJpZmllciB9IGZyb20gJy4vY29kZS5qcyc7XG5pbXBvcnQgeyByZXNldHRhYmxlUHJvbWlzZSB9IGZyb20gJy4vcmVzZXQtcHJvbWlzZS5qcyc7XG5pbXBvcnQgeyBUeXBlZEV2ZW50VGFyZ2V0IH0gZnJvbSAnLi9UeXBlZEV2ZW50VGFyZ2V0LmpzJztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjb25zdCBhdXRoU3RhdGUgPSB7XG4gICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIGJvb3RDYWxsZWQ6IGZhbHNlLFxuICAgIGF1dGhDb21wbGV0ZTogcmVzZXR0YWJsZVByb21pc2UoKSxcbiAgICBjbGllbnRJZDogJycsXG4gICAgb2F1dGhTY29wZTogJycsXG4gICAgYnJvYWRjYXN0Q2hhbm5lbDogbnVsbCxcbiAgICBnZXQgZWRpdG9yT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gaWZyYW1lU2V0dGluZ3MuZWRpdG9yT3JpZ2luO1xuICAgIH0sXG4gICAgdG9rZW5zOiBudWxsLFxufTtcbmNvbnN0IGF1dGhGYWlsZWRMaXN0ZW5lcnMgPSBuZXcgVHlwZWRFdmVudFRhcmdldCgpO1xuY29uc3QgbG9nZ2VkT3V0TGlzdGVuZXJzID0gbmV3IFR5cGVkRXZlbnRUYXJnZXQoKTtcbmZ1bmN0aW9uIGJyb2FkY2FzdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmICghYXV0aFN0YXRlLmJyb2FkY2FzdENoYW5uZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhdXRoU3RhdGUuYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAvLyBjaGVjayBpZiB3ZSBhcmUgaW4gYSBwb3B1cCBtb2RlXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfUE9QVVBfTkFNRSkgPT09ICd0cnVlJyAmJiBtZXNzYWdlLnR5cGUgIT09ICdhdXRoLWxvZ291dCcpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9QT1BVUF9OQU1FKTtcbiAgICAgICAgLy8gd2FpdCBhIHRpY2sgdG8gbWFrZSBzdXJlIHRoZSBwb3N0ZWQgbWVzc2FnZSBoYXMgYmVlbiBzZW50XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBhdXRoID0ge1xuICAgIGluaXQoeyBlZGl0b3JPcmlnaW4sIGNsaWVudElkLCBzY29wZSB9KSB7XG4gICAgICAgIGlmIChhdXRoU3RhdGUuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5pdCBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbnRlcnByaXNlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGVudGVycHJpc2UgJiYgYXV0aFN0YXRlLmJvb3RDYWxsZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGF1dGguaW5pdGAgc2hvdWxkIGFsd2F5cyBiZSBjYWxsZWQgYmVmb3JlIGBXZWJDb250YWluZXIuYm9vdGAnKTtcbiAgICAgICAgfVxuICAgICAgICBhdXRoU3RhdGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBhdXRoU3RhdGUudG9rZW5zID0gVG9rZW5zLmZyb21TdG9yYWdlKCk7XG4gICAgICAgIGF1dGhTdGF0ZS5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgICBhdXRoU3RhdGUub2F1dGhTY29wZSA9IHNjb3BlO1xuICAgICAgICBhdXRoU3RhdGUuYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKEJST0FEQ0FTVF9DSEFOTkVMX05BTUUpO1xuICAgICAgICAvLyBjb25maWd1cmUgaWZyYW1lIHVybFxuICAgICAgICBpZnJhbWVTZXR0aW5ncy5zZXRRdWVyeVBhcmFtKCdjbGllbnRfaWQnLCBjbGllbnRJZCk7XG4gICAgICAgIGlmIChlZGl0b3JPcmlnaW4pIHtcbiAgICAgICAgICAgIGlmcmFtZVNldHRpbmdzLmVkaXRvck9yaWdpbiA9IG5ldyBVUkwoZWRpdG9yT3JpZ2luKS5vcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmxpc3RlbigoKSA9PiBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnJlc2V0KCkpO1xuICAgICAgICAvLyBpZiBhdXRoZW50aWNhdGlvbiBvciBsb2dvdXQgYXJlIGRvbmUgaW4gYW5vdGhlciBwYWdlLCB3ZSB3YW50IHRvIHJlZmxlY3QgdGhlIHN0YXRlIG9uIHRoaXMgcGFnZSBhcyB3ZWxsXG4gICAgICAgIGF1dGhTdGF0ZS5icm9hZGNhc3RDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbkNoYW5uZWxNZXNzYWdlKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb25DaGFubmVsTWVzc2FnZShldmVudCkge1xuICAgICAgICAgICAgY29uc3QgdHlwZWRFdmVudCA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBpZiAodHlwZWRFdmVudC50eXBlID09PSAnYXV0aC1jb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICBhdXRoU3RhdGUudG9rZW5zID0gVG9rZW5zLmZyb21TdG9yYWdlKCk7XG4gICAgICAgICAgICAgICAgLy8gd2UgaWdub3JlIHRoZSBwb3NzaWJsZSBlcnJvciBoZXJlIGJlY2F1c2UgdGhleSBjYW4ndCBoYXZlIGV4cGlyZWQganVzdCB5ZXRcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoU3RhdGUudG9rZW5zLmFjdGl2YXRlKG9uRmFpbGVkVG9rZW5SZWZyZXNoKTtcbiAgICAgICAgICAgICAgICBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZWRFdmVudC50eXBlID09PSAnYXV0aC1mYWlsZWQnKSB7XG4gICAgICAgICAgICAgICAgYXV0aEZhaWxlZExpc3RlbmVycy5maXJlRXZlbnQodHlwZWRFdmVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVkRXZlbnQudHlwZSA9PT0gJ2F1dGgtbG9nb3V0Jykge1xuICAgICAgICAgICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhTdGF0ZS50b2tlbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IGF1dGhTdGF0ZS50b2tlbnM7XG4gICAgICAgICAgICBpZiAodG9rZW5zLm9yaWdpbiA9PT0gYXV0aFN0YXRlLmVkaXRvck9yaWdpbikge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEhlcmUgd2UgYXNzdW1lIHRoYXQgdGhlIHJlZnJlc2ggdG9rZW4gbmV2ZXIgZXhwaXJlcyB3aGljaFxuICAgICAgICAgICAgICAgICAqIG1pZ2h0IG5vdCBiZSBjb3JyZWN0LiBJZiB0aGF0IGlzIHRoZSBjYXNlIHRob3VnaCwgd2Ugd2lsbFxuICAgICAgICAgICAgICAgICAqIGVtaXQgYSAnbG9nZ2VkLW91dCcgZXZlbnQgdG8gc2lnbmFsIHRoYXQgdGhlIHVzZXIgaGFzIGJlZW5cbiAgICAgICAgICAgICAgICAgKiBsb2dnZWQgb3V0LCB3aGljaCBjb3VsZCBhbHNvIGhhcHBlbiBhdCBhIGxhdGVyIHRpbWUgYW55d2F5LlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQmVjYXVzZSB0aGlzIGZsb3cgaXMgZG9uZSBlbnRpcmVseSBsb2NhbGx5LCB3ZSBkbyBub3QgYnJvYWRjYXN0XG4gICAgICAgICAgICAgICAgICogYW55dGhpbmcgdG8gdGhlIG90aGVyIHRhYnMuIFRoZXkgc2hvdWxkIGJlIHBlcmZvcm1pbmcgYSBzaW1pbGFyXG4gICAgICAgICAgICAgICAgICogY2hlY2suXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRva2Vucy5hY3RpdmF0ZShvbkZhaWxlZFRva2VuUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZ290IG5ldyB0b2tlbiBpbiB0aGUgbWVhbnRpbWUgd2UgZGlzY2FyZCB0aGlzIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aFN0YXRlLnRva2VucyAhPT0gdG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmZpcmVFdmVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF1dGhTdGF0ZS5hdXRoQ29tcGxldGUucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnYXV0aG9yaXplZCcgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVG9rZW5zSW5TdG9yYWdlKCk7XG4gICAgICAgICAgICBhdXRoU3RhdGUudG9rZW5zID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblVSTCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbG9jYXRpb25VUkw7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVVSTCA9ICgpID0+IHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIGxvY2F0aW9uVVJMKTtcbiAgICAgICAgLy8gY2hlY2sgZm9yIGVycm9ycyBmaXJzdCwgYWthIHRoZSB1c2VyIGRlY2xpbmVkIHRoZSBhdXRob3Jpc2F0aW9uIG9yIHN0YWNrYmxpdHogZGlkXG4gICAgICAgIGlmIChzZWFyY2hQYXJhbXMuaGFzKFNFQVJDSF9QQVJBTV9FUlJPUikpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gc2VhcmNoUGFyYW1zLmdldChTRUFSQ0hfUEFSQU1fRVJST1IpO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTik7XG4gICAgICAgICAgICBzZWFyY2hQYXJhbXMuZGVsZXRlKFNFQVJDSF9QQVJBTV9FUlJPUik7XG4gICAgICAgICAgICBzZWFyY2hQYXJhbXMuZGVsZXRlKFNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTik7XG4gICAgICAgICAgICB1cGRhdGVVUkwoKTtcbiAgICAgICAgICAgIGJyb2FkY2FzdE1lc3NhZ2UoeyB0eXBlOiAnYXV0aC1mYWlsZWQnLCBlcnJvciwgZGVzY3JpcHRpb24gfSk7XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdhdXRoLWZhaWxlZCcsIGVycm9yLCBkZXNjcmlwdGlvbiB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZXJlJ3MgYW4gYXV0aCBjb2RlXG4gICAgICAgIGlmIChzZWFyY2hQYXJhbXMuaGFzKFNFQVJDSF9QQVJBTV9BVVRIX0NPREUpKSB7XG4gICAgICAgICAgICBjb25zdCBhdXRoQ29kZSA9IHNlYXJjaFBhcmFtcy5nZXQoU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSk7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3JPcmlnaW4gPSBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luO1xuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFKTtcbiAgICAgICAgICAgIHVwZGF0ZVVSTCgpO1xuICAgICAgICAgICAgY29uc3QgY29kZVZlcmlmaWVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUpO1xuICAgICAgICAgICAgaWYgKCFjb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6ICduZWVkLWF1dGgnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0NPREVfVkVSSUZJRVJfTkFNRSk7XG4gICAgICAgICAgICBUb2tlbnMuZnJvbUF1dGhDb2RlKHtcbiAgICAgICAgICAgICAgICBlZGl0b3JPcmlnaW4sXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGF1dGhTdGF0ZS5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBhdXRoQ29kZSxcbiAgICAgICAgICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RVcmk6IGRlZmF1bHRSZWRpcmVjdFVyaSgpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAodG9rZW5zKSA9PiB7XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IHRva2VucztcbiAgICAgICAgICAgICAgICBhc3NlcnRBdXRoVG9rZW5zKGF1dGhTdGF0ZS50b2tlbnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBhdXRoU3RhdGUudG9rZW5zLmFjdGl2YXRlKG9uRmFpbGVkVG9rZW5SZWZyZXNoKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBhdXRoZW50aWNhdGlvbiBmYWlsZWQgd2UgdGhyb3csIGFuZCB3ZSdsbCBtYXJrIGF1dGggYXMgZmFpbGVkXG4gICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtY29tcGxldGUnIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIHVubGVzcyB0aGUgcmFpbHMgYXBwIGlzIG5vdyBkb3duIGZvciBzb21lIHJlYXNvbj9cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyB0cmVhdCBpdCBhcyBhIGxvZ2dlZCBvdXQgZXZlbnQgc28gdGhhdCB0aGUgdXNlciBjYW4gcmV0cnkgdG8gbG9naW5cbiAgICAgICAgICAgICAgICBsb2dnZWRPdXRMaXN0ZW5lcnMuZmlyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0TWVzc2FnZSh7IHR5cGU6ICdhdXRoLWxvZ291dCcgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogJ2F1dGhvcml6ZWQnIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbmVlZC1hdXRoJyB9O1xuICAgIH0sXG4gICAgYXN5bmMgc3RhcnRBdXRoRmxvdyh7IHBvcHVwIH0gPSB7fSkge1xuICAgICAgICBpZiAoIWF1dGhTdGF0ZS5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdXRoLmluaXQgbXVzdCBiZSBjYWxsZWQgZmlyc3QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9wdXApIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfUE9QVVBfTkFNRSwgJ3RydWUnKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IDUwMDtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gNjIwO1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IHdpbmRvdy5zY3JlZW5MZWZ0ICsgKHdpbmRvdy5vdXRlcldpZHRoIC0gd2lkdGgpIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHdpbmRvdy5zY3JlZW5Ub3AgKyAod2luZG93Lm91dGVySGVpZ2h0IC0gaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICB3aW5kb3cub3Blbihhd2FpdCBnZW5lcmF0ZU9BdXRoUmVxdWVzdCgpLCAnX2JsYW5rJywgYHBvcHVwLHdpZHRoPSR7d2lkdGh9LGhlaWdodD0ke2hlaWdodH0sbGVmdD0ke2xlZnR9LHRvcD0ke3RvcH1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYXdhaXQgZ2VuZXJhdGVPQXV0aFJlcXVlc3QoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgbG9nb3V0KHsgaWdub3JlUmV2b2tlRXJyb3IgfSA9IHt9KSB7XG4gICAgICAgIGF3YWl0IGF1dGhTdGF0ZS50b2tlbnM/LnJldm9rZShhdXRoU3RhdGUuY2xpZW50SWQsIGlnbm9yZVJldm9rZUVycm9yID8/IGZhbHNlKTtcbiAgICAgICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmZpcmVFdmVudCgpO1xuICAgICAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtbG9nb3V0JyB9KTtcbiAgICB9LFxuICAgIGxvZ2dlZEluKCkge1xuICAgICAgICByZXR1cm4gYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5wcm9taXNlO1xuICAgIH0sXG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2F1dGgtZmFpbGVkJzoge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdXRoRmFpbGVkTGlzdGVuZXJzLmxpc3RlbihsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdsb2dnZWQtb3V0Jzoge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZWRPdXRMaXN0ZW5lcnMubGlzdGVuKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGV2ZW50IHR5cGUgJyR7ZXZlbnR9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59O1xuZnVuY3Rpb24gb25GYWlsZWRUb2tlblJlZnJlc2goKSB7XG4gICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmZpcmVFdmVudCgpO1xuICAgIGJyb2FkY2FzdE1lc3NhZ2UoeyB0eXBlOiAnYXV0aC1sb2dvdXQnIH0pO1xufVxuZnVuY3Rpb24gZGVmYXVsdFJlZGlyZWN0VXJpKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlT0F1dGhSZXF1ZXN0KCkge1xuICAgIGNvbnN0IGNvZGVWZXJpZmllciA9IG5ld0NvZGVWZXJpZmllcigpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FLCBjb2RlVmVyaWZpZXIpO1xuICAgIGNvbnN0IGNvZGVDaGFsbGVuZ2UgPSBhd2FpdCBTMjU2KGNvZGVWZXJpZmllcik7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL29hdXRoL2F1dGhvcml6ZScsIGF1dGhTdGF0ZS5lZGl0b3JPcmlnaW4pO1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSB1cmw7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfdHlwZScsICdjb2RlJyk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgYXV0aFN0YXRlLmNsaWVudElkKTtcbiAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKCdyZWRpcmVjdF91cmknLCBkZWZhdWx0UmVkaXJlY3RVcmkoKSk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnc2NvcGUnLCBhdXRoU3RhdGUub2F1dGhTY29wZSk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnY29kZV9jaGFsbGVuZ2UnLCBjb2RlQ2hhbGxlbmdlKTtcbiAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKCdjb2RlX2NoYWxsZW5nZV9tZXRob2QnLCAnUzI1NicpO1xuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRBdXRoVG9rZW5zKHRva2Vucykge1xuICAgIGlmICghdG9rZW5zKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT29wcyEgVG9rZW5zIGlzIG5vdCBkZWZpbmVkIHdoZW4gaXQgYWx3YXlzIHNob3VsZCBiZS4nKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js":
/*!**************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/code.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S256: () => (/* binding */ S256),\n/* harmony export */   newCodeVerifier: () => (/* binding */ newCodeVerifier)\n/* harmony export */ });\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.2 that can\n * run in the browser.\n *\n * @internal\n *\n * @param input Code verifier.\n */\nasync function S256(input) {\n    // input here is assumed to match https://www.rfc-editor.org/rfc/rfc3986#section-2.3\n    const ascii = new TextEncoder().encode(input);\n    const sha256 = new Uint8Array(await crypto.subtle.digest('SHA-256', ascii));\n    // base64url encode, based on https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n    return btoa(sha256.reduce((binary, byte) => binary + String.fromCodePoint(byte), ''))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=+$/, '');\n}\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.1 with\n * a slight deviation:\n *\n *  - We use 128 characters (it's expected to be between 43 and 128)\n *  - We use 64 characters instead of 66\n *\n * So the entropy is lower given the space size is 64^128 instead of 66^128.\n * It still satisfies the entropy constraint given that 64^128 > 66^43.\n *\n * @internal\n */\nfunction newCodeVerifier() {\n    const random = new Uint8Array(96);\n    crypto.getRandomValues(random);\n    let codeVerifier = '';\n    for (let i = 0; i < 32; ++i) {\n        codeVerifier += nextFourChars(random[3 * i + 0], random[3 * i + 1], random[3 * i + 2]);\n    }\n    return codeVerifier;\n}\nfunction nextFourChars(byte1, byte2, byte3) {\n    const char1 = byte1 >> 2;\n    const char2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n    const char3 = (byte2 & 15) | ((byte3 & 192) >> 2);\n    const char4 = byte3 & 63;\n    return [char1, char2, char3, char4].map(unreservedCharacters).join('');\n}\nfunction unreservedCharacters(code) {\n    let offset;\n    if (code < 26) {\n        offset = code + 65; // [A-Z]\n    }\n    else if (code < 52) {\n        offset = code - 26 + 97; // [a-z]\n    }\n    else if (code < 62) {\n        offset = code - 52 + 48; // [0-9]\n    }\n    else {\n        offset = code === 62 ? 30 /* _ */ : 45 /* - */;\n    }\n    return String.fromCharCode(offset);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvY29kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM3NjM2I3NlY3Rpb24tNC4yIHRoYXQgY2FuXG4gKiBydW4gaW4gdGhlIGJyb3dzZXIuXG4gKlxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGlucHV0IENvZGUgdmVyaWZpZXIuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBTMjU2KGlucHV0KSB7XG4gICAgLy8gaW5wdXQgaGVyZSBpcyBhc3N1bWVkIHRvIG1hdGNoIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmMzOTg2I3NlY3Rpb24tMi4zXG4gICAgY29uc3QgYXNjaWkgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaW5wdXQpO1xuICAgIGNvbnN0IHNoYTI1NiA9IG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgYXNjaWkpKTtcbiAgICAvLyBiYXNlNjR1cmwgZW5jb2RlLCBiYXNlZCBvbiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0dsb3NzYXJ5L0Jhc2U2NCN0aGVfdW5pY29kZV9wcm9ibGVtXG4gICAgcmV0dXJuIGJ0b2Eoc2hhMjU2LnJlZHVjZSgoYmluYXJ5LCBieXRlKSA9PiBiaW5hcnkgKyBTdHJpbmcuZnJvbUNvZGVQb2ludChieXRlKSwgJycpKVxuICAgICAgICAucmVwbGFjZSgvXFwrL2csICctJylcbiAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCAnXycpXG4gICAgICAgIC5yZXBsYWNlKC89KyQvLCAnJyk7XG59XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM3NjM2I3NlY3Rpb24tNC4xIHdpdGhcbiAqIGEgc2xpZ2h0IGRldmlhdGlvbjpcbiAqXG4gKiAgLSBXZSB1c2UgMTI4IGNoYXJhY3RlcnMgKGl0J3MgZXhwZWN0ZWQgdG8gYmUgYmV0d2VlbiA0MyBhbmQgMTI4KVxuICogIC0gV2UgdXNlIDY0IGNoYXJhY3RlcnMgaW5zdGVhZCBvZiA2NlxuICpcbiAqIFNvIHRoZSBlbnRyb3B5IGlzIGxvd2VyIGdpdmVuIHRoZSBzcGFjZSBzaXplIGlzIDY0XjEyOCBpbnN0ZWFkIG9mIDY2XjEyOC5cbiAqIEl0IHN0aWxsIHNhdGlzZmllcyB0aGUgZW50cm9weSBjb25zdHJhaW50IGdpdmVuIHRoYXQgNjReMTI4ID4gNjZeNDMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuZXdDb2RlVmVyaWZpZXIoKSB7XG4gICAgY29uc3QgcmFuZG9tID0gbmV3IFVpbnQ4QXJyYXkoOTYpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocmFuZG9tKTtcbiAgICBsZXQgY29kZVZlcmlmaWVyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMjsgKytpKSB7XG4gICAgICAgIGNvZGVWZXJpZmllciArPSBuZXh0Rm91ckNoYXJzKHJhbmRvbVszICogaSArIDBdLCByYW5kb21bMyAqIGkgKyAxXSwgcmFuZG9tWzMgKiBpICsgMl0pO1xuICAgIH1cbiAgICByZXR1cm4gY29kZVZlcmlmaWVyO1xufVxuZnVuY3Rpb24gbmV4dEZvdXJDaGFycyhieXRlMSwgYnl0ZTIsIGJ5dGUzKSB7XG4gICAgY29uc3QgY2hhcjEgPSBieXRlMSA+PiAyO1xuICAgIGNvbnN0IGNoYXIyID0gKChieXRlMSAmIDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xuICAgIGNvbnN0IGNoYXIzID0gKGJ5dGUyICYgMTUpIHwgKChieXRlMyAmIDE5MikgPj4gMik7XG4gICAgY29uc3QgY2hhcjQgPSBieXRlMyAmIDYzO1xuICAgIHJldHVybiBbY2hhcjEsIGNoYXIyLCBjaGFyMywgY2hhcjRdLm1hcCh1bnJlc2VydmVkQ2hhcmFjdGVycykuam9pbignJyk7XG59XG5mdW5jdGlvbiB1bnJlc2VydmVkQ2hhcmFjdGVycyhjb2RlKSB7XG4gICAgbGV0IG9mZnNldDtcbiAgICBpZiAoY29kZSA8IDI2KSB7XG4gICAgICAgIG9mZnNldCA9IGNvZGUgKyA2NTsgLy8gW0EtWl1cbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA8IDUyKSB7XG4gICAgICAgIG9mZnNldCA9IGNvZGUgLSAyNiArIDk3OyAvLyBbYS16XVxuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlIDwgNjIpIHtcbiAgICAgICAgb2Zmc2V0ID0gY29kZSAtIDUyICsgNDg7IC8vIFswLTldXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvZmZzZXQgPSBjb2RlID09PSA2MiA/IDMwIC8qIF8gKi8gOiA0NSAvKiAtICovO1xuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShvZmZzZXQpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/constants.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BROADCAST_CHANNEL_NAME: () => (/* binding */ BROADCAST_CHANNEL_NAME),\n/* harmony export */   DEFAULT_EDITOR_ORIGIN: () => (/* binding */ DEFAULT_EDITOR_ORIGIN),\n/* harmony export */   SEARCH_PARAM_AUTH_CODE: () => (/* binding */ SEARCH_PARAM_AUTH_CODE),\n/* harmony export */   SEARCH_PARAM_ERROR: () => (/* binding */ SEARCH_PARAM_ERROR),\n/* harmony export */   SEARCH_PARAM_ERROR_DESCRIPTION: () => (/* binding */ SEARCH_PARAM_ERROR_DESCRIPTION),\n/* harmony export */   STORAGE_CODE_VERIFIER_NAME: () => (/* binding */ STORAGE_CODE_VERIFIER_NAME),\n/* harmony export */   STORAGE_POPUP_NAME: () => (/* binding */ STORAGE_POPUP_NAME),\n/* harmony export */   STORAGE_TOKENS_NAME: () => (/* binding */ STORAGE_TOKENS_NAME)\n/* harmony export */ });\nconst DEFAULT_EDITOR_ORIGIN = 'https://stackblitz.com';\nconst SEARCH_PARAM_AUTH_CODE = 'code';\nconst SEARCH_PARAM_ERROR = 'error';\nconst SEARCH_PARAM_ERROR_DESCRIPTION = 'error_description';\nconst BROADCAST_CHANNEL_NAME = '__wc_api_bc__';\nconst STORAGE_TOKENS_NAME = '__wc_api_tokens__';\nconst STORAGE_CODE_VERIFIER_NAME = '__wc_api_verifier__';\nconst STORAGE_POPUP_NAME = '__wc_api_popup__';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L2ludGVybmFsL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgREVGQVVMVF9FRElUT1JfT1JJR0lOID0gJ2h0dHBzOi8vc3RhY2tibGl0ei5jb20nO1xuZXhwb3J0IGNvbnN0IFNFQVJDSF9QQVJBTV9BVVRIX0NPREUgPSAnY29kZSc7XG5leHBvcnQgY29uc3QgU0VBUkNIX1BBUkFNX0VSUk9SID0gJ2Vycm9yJztcbmV4cG9ydCBjb25zdCBTRUFSQ0hfUEFSQU1fRVJST1JfREVTQ1JJUFRJT04gPSAnZXJyb3JfZGVzY3JpcHRpb24nO1xuZXhwb3J0IGNvbnN0IEJST0FEQ0FTVF9DSEFOTkVMX05BTUUgPSAnX193Y19hcGlfYmNfXyc7XG5leHBvcnQgY29uc3QgU1RPUkFHRV9UT0tFTlNfTkFNRSA9ICdfX3djX2FwaV90b2tlbnNfXyc7XG5leHBvcnQgY29uc3QgU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUgPSAnX193Y19hcGlfdmVyaWZpZXJfXyc7XG5leHBvcnQgY29uc3QgU1RPUkFHRV9QT1BVUF9OQU1FID0gJ19fd2NfYXBpX3BvcHVwX18nO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/iframe-url.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   iframeSettings: () => (/* binding */ iframeSettings)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n\nconst params = {};\nlet editorOrigin = null;\nconst iframeSettings = {\n    get editorOrigin() {\n        if (editorOrigin == null) {\n            editorOrigin = new URL(globalThis.WEBCONTAINER_API_IFRAME_URL ?? _constants_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_EDITOR_ORIGIN).origin;\n        }\n        return editorOrigin;\n    },\n    set editorOrigin(newOrigin) {\n        editorOrigin = new URL(newOrigin).origin;\n    },\n    setQueryParam(key, value) {\n        params[key] = value;\n    },\n    get url() {\n        const url = new URL(this.editorOrigin);\n        url.pathname = '/headless';\n        for (const param in params) {\n            url.searchParams.set(param, params[param]);\n        }\n        url.searchParams.set('version', \"1.6.1\");\n        return url;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVEO0FBQ3ZEO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSw2RUFBNkUsZ0VBQXFCO0FBQ2xHO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvaWZyYW1lLXVybC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBERUZBVUxUX0VESVRPUl9PUklHSU4gfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5jb25zdCBwYXJhbXMgPSB7fTtcbmxldCBlZGl0b3JPcmlnaW4gPSBudWxsO1xuZXhwb3J0IGNvbnN0IGlmcmFtZVNldHRpbmdzID0ge1xuICAgIGdldCBlZGl0b3JPcmlnaW4oKSB7XG4gICAgICAgIGlmIChlZGl0b3JPcmlnaW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgZWRpdG9yT3JpZ2luID0gbmV3IFVSTChnbG9iYWxUaGlzLldFQkNPTlRBSU5FUl9BUElfSUZSQU1FX1VSTCA/PyBERUZBVUxUX0VESVRPUl9PUklHSU4pLm9yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWRpdG9yT3JpZ2luO1xuICAgIH0sXG4gICAgc2V0IGVkaXRvck9yaWdpbihuZXdPcmlnaW4pIHtcbiAgICAgICAgZWRpdG9yT3JpZ2luID0gbmV3IFVSTChuZXdPcmlnaW4pLm9yaWdpbjtcbiAgICB9LFxuICAgIHNldFF1ZXJ5UGFyYW0oa2V5LCB2YWx1ZSkge1xuICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVybCgpIHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmVkaXRvck9yaWdpbik7XG4gICAgICAgIHVybC5wYXRobmFtZSA9ICcvaGVhZGxlc3MnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmFtIGluIHBhcmFtcykge1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQocGFyYW0sIHBhcmFtc1twYXJhbV0pO1xuICAgICAgICB9XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd2ZXJzaW9uJywgXCIxLjYuMVwiKTtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/reset-promise.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resettablePromise: () => (/* binding */ resettablePromise)\n/* harmony export */ });\n/**\n * @internal\n */\nfunction resettablePromise() {\n    let resolve;\n    let promise;\n    function reset() {\n        promise = new Promise((_resolve) => (resolve = _resolve));\n    }\n    reset();\n    return {\n        get promise() {\n            return promise;\n        },\n        resolve(value) {\n            return resolve(value);\n        },\n        reset,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9yZXNldC1wcm9taXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL21udC81QTAwMjhGODAwMjhERDJGL3Byb2plY3RzL3ZpYmVDb2RlciAobGludXgpL3ZpYmVDb2Rlci9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9yZXNldC1wcm9taXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldHRhYmxlUHJvbWlzZSgpIHtcbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSkgPT4gKHJlc29sdmUgPSBfcmVzb2x2ZSkpO1xuICAgIH1cbiAgICByZXNldCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXQsXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js":
/*!****************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/tokens.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   addAccessTokenChangedListener: () => (/* binding */ addAccessTokenChangedListener),\n/* harmony export */   clearTokensInStorage: () => (/* binding */ clearTokensInStorage)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\nconst IGNORED_ERROR = new Error();\nIGNORED_ERROR.stack = '';\nconst accessTokenChangedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__.TypedEventTarget();\n/**\n * @internal\n */\nclass Tokens {\n    origin;\n    refresh;\n    access;\n    expires;\n    _revoked = new AbortController();\n    constructor(\n    // editor origin that those tokens are bound to, mostly used for development\n    origin, \n    // token to use to get a new access token\n    refresh, \n    // token to provide to webcontainer\n    access, \n    // time in UTC when the token expires\n    expires) {\n        this.origin = origin;\n        this.refresh = refresh;\n        this.access = access;\n        this.expires = expires;\n    }\n    async activate(onFailedRefresh) {\n        if (this._revoked.signal.aborted) {\n            throw new Error('Token revoked');\n        }\n        // if the access token expired we fetch a new one\n        if (this.expires < Date.now()) {\n            if (!(await this._fetchNewAccessToken())) {\n                return false;\n            }\n        }\n        this._sync();\n        this._startRefreshTokensLoop(onFailedRefresh);\n        return true;\n    }\n    async revoke(clientId, ignoreRevokeError) {\n        this._revoked.abort();\n        try {\n            const response = await fetch(`${this.origin}/oauth/revoke`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({ token: this.refresh, token_type_hint: 'refresh_token', client_id: clientId }),\n                mode: 'cors',\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to logout`);\n            }\n        }\n        catch (error) {\n            if (!ignoreRevokeError) {\n                throw error;\n            }\n        }\n        clearTokensInStorage();\n    }\n    static fromStorage() {\n        const savedTokens = readTokensFromStorage();\n        if (!savedTokens) {\n            return null;\n        }\n        return new Tokens(savedTokens.origin, savedTokens.refresh, savedTokens.access, savedTokens.expires);\n    }\n    static async fromAuthCode({ editorOrigin, clientId, codeVerifier, authCode, redirectUri, }) {\n        const response = await fetch(`${editorOrigin}/oauth/token`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: new URLSearchParams({\n                client_id: clientId,\n                code: authCode,\n                code_verifier: codeVerifier,\n                grant_type: 'authorization_code',\n                redirect_uri: redirectUri,\n            }),\n            mode: 'cors',\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch token: ${response.status}`);\n        }\n        const tokenResponse = await response.json();\n        assertTokenResponse(tokenResponse);\n        const { access_token: access, refresh_token: refresh } = tokenResponse;\n        const expires = getExpiresFromTokenResponse(tokenResponse);\n        return new Tokens(editorOrigin, refresh, access, expires);\n    }\n    async _fetchNewAccessToken() {\n        try {\n            const response = await fetch(`${this.origin}/oauth/token`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({\n                    grant_type: 'refresh_token',\n                    refresh_token: this.refresh,\n                }),\n                mode: 'cors',\n                signal: this._revoked.signal,\n            });\n            if (!response.ok) {\n                throw IGNORED_ERROR;\n            }\n            const tokenResponse = await response.json();\n            assertTokenResponse(tokenResponse);\n            const { access_token: access, refresh_token: refresh } = tokenResponse;\n            const expires = getExpiresFromTokenResponse(tokenResponse);\n            this.access = access;\n            this.expires = expires;\n            this.refresh = refresh;\n            return true;\n        }\n        catch {\n            clearTokensInStorage();\n            return false;\n        }\n    }\n    _sync() {\n        persistTokensInStorage(this);\n        fireAccessTokenChanged(this.access);\n    }\n    async _startRefreshTokensLoop(onFailedRefresh) {\n        while (true) {\n            const expiresIn = this.expires - Date.now() - 1000;\n            await wait(Math.max(expiresIn, 1000));\n            if (this._revoked.signal.aborted) {\n                return;\n            }\n            if (!this._fetchNewAccessToken()) {\n                onFailedRefresh();\n                return;\n            }\n            this._sync();\n        }\n    }\n}\n/**\n * @internal\n */\nfunction clearTokensInStorage() {\n    localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n}\n/**\n * @internal\n */\nfunction addAccessTokenChangedListener(listener) {\n    return accessTokenChangedListeners.listen(listener);\n}\nfunction readTokensFromStorage() {\n    const serializedTokens = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n    if (!serializedTokens) {\n        return null;\n    }\n    try {\n        return JSON.parse(serializedTokens);\n    }\n    catch {\n        return null;\n    }\n}\nfunction persistTokensInStorage(tokens) {\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME, JSON.stringify(tokens));\n}\nfunction getExpiresFromTokenResponse({ created_at, expires_in }) {\n    return (created_at + expires_in) * 1000;\n}\nfunction assertTokenResponse(token) {\n    if (typeof token !== 'object' || !token) {\n        throw new Error('Invalid Token Response');\n    }\n    if (typeof token.access_token !== 'string' ||\n        typeof token.refresh_token !== 'string' ||\n        typeof token.created_at !== 'number' ||\n        typeof token.expires_in !== 'number') {\n        throw new Error('Invalid Token Response');\n    }\n}\nfunction wait(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\nfunction fireAccessTokenChanged(accessToken) {\n    accessTokenChangedListeners.fireEvent(accessToken);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC90b2tlbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDSTtBQUN6RDtBQUNBO0FBQ0Esd0NBQXdDLGtFQUFnQjtBQUN4RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxZQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiw0Q0FBNEMsNEVBQTRFO0FBQ3hIO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4REFBOEQ7QUFDOUYsd0NBQXdDLGFBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLHNEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUErQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFlBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQStDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNEJBQTRCLDhEQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhEQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFtQjtBQUM1QztBQUNBLHVDQUF1Qyx3QkFBd0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvdG9rZW5zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNUT1JBR0VfVE9LRU5TX05BTUUgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBUeXBlZEV2ZW50VGFyZ2V0IH0gZnJvbSAnLi9UeXBlZEV2ZW50VGFyZ2V0LmpzJztcbmNvbnN0IElHTk9SRURfRVJST1IgPSBuZXcgRXJyb3IoKTtcbklHTk9SRURfRVJST1Iuc3RhY2sgPSAnJztcbmNvbnN0IGFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVycyA9IG5ldyBUeXBlZEV2ZW50VGFyZ2V0KCk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgVG9rZW5zIHtcbiAgICBvcmlnaW47XG4gICAgcmVmcmVzaDtcbiAgICBhY2Nlc3M7XG4gICAgZXhwaXJlcztcbiAgICBfcmV2b2tlZCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBlZGl0b3Igb3JpZ2luIHRoYXQgdGhvc2UgdG9rZW5zIGFyZSBib3VuZCB0bywgbW9zdGx5IHVzZWQgZm9yIGRldmVsb3BtZW50XG4gICAgb3JpZ2luLCBcbiAgICAvLyB0b2tlbiB0byB1c2UgdG8gZ2V0IGEgbmV3IGFjY2VzcyB0b2tlblxuICAgIHJlZnJlc2gsIFxuICAgIC8vIHRva2VuIHRvIHByb3ZpZGUgdG8gd2ViY29udGFpbmVyXG4gICAgYWNjZXNzLCBcbiAgICAvLyB0aW1lIGluIFVUQyB3aGVuIHRoZSB0b2tlbiBleHBpcmVzXG4gICAgZXhwaXJlcykge1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5yZWZyZXNoID0gcmVmcmVzaDtcbiAgICAgICAgdGhpcy5hY2Nlc3MgPSBhY2Nlc3M7XG4gICAgICAgIHRoaXMuZXhwaXJlcyA9IGV4cGlyZXM7XG4gICAgfVxuICAgIGFzeW5jIGFjdGl2YXRlKG9uRmFpbGVkUmVmcmVzaCkge1xuICAgICAgICBpZiAodGhpcy5fcmV2b2tlZC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb2tlbiByZXZva2VkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIGFjY2VzcyB0b2tlbiBleHBpcmVkIHdlIGZldGNoIGEgbmV3IG9uZVxuICAgICAgICBpZiAodGhpcy5leHBpcmVzIDwgRGF0ZS5ub3coKSkge1xuICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5fZmV0Y2hOZXdBY2Nlc3NUb2tlbigpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zeW5jKCk7XG4gICAgICAgIHRoaXMuX3N0YXJ0UmVmcmVzaFRva2Vuc0xvb3Aob25GYWlsZWRSZWZyZXNoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHJldm9rZShjbGllbnRJZCwgaWdub3JlUmV2b2tlRXJyb3IpIHtcbiAgICAgICAgdGhpcy5fcmV2b2tlZC5hYm9ydCgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLm9yaWdpbn0vb2F1dGgvcmV2b2tlYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7IHRva2VuOiB0aGlzLnJlZnJlc2gsIHRva2VuX3R5cGVfaGludDogJ3JlZnJlc2hfdG9rZW4nLCBjbGllbnRfaWQ6IGNsaWVudElkIH0pLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvZ291dGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCFpZ25vcmVSZXZva2VFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsZWFyVG9rZW5zSW5TdG9yYWdlKCk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3RvcmFnZSgpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRUb2tlbnMgPSByZWFkVG9rZW5zRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgaWYgKCFzYXZlZFRva2Vucykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbnMoc2F2ZWRUb2tlbnMub3JpZ2luLCBzYXZlZFRva2Vucy5yZWZyZXNoLCBzYXZlZFRva2Vucy5hY2Nlc3MsIHNhdmVkVG9rZW5zLmV4cGlyZXMpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgZnJvbUF1dGhDb2RlKHsgZWRpdG9yT3JpZ2luLCBjbGllbnRJZCwgY29kZVZlcmlmaWVyLCBhdXRoQ29kZSwgcmVkaXJlY3RVcmksIH0pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtlZGl0b3JPcmlnaW59L29hdXRoL3Rva2VuYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY29kZTogYXV0aENvZGUsXG4gICAgICAgICAgICAgICAgY29kZV92ZXJpZmllcjogY29kZVZlcmlmaWVyLFxuICAgICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdhdXRob3JpemF0aW9uX2NvZGUnLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHRva2VuOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBhc3NlcnRUb2tlblJlc3BvbnNlKHRva2VuUmVzcG9uc2UpO1xuICAgICAgICBjb25zdCB7IGFjY2Vzc190b2tlbjogYWNjZXNzLCByZWZyZXNoX3Rva2VuOiByZWZyZXNoIH0gPSB0b2tlblJlc3BvbnNlO1xuICAgICAgICBjb25zdCBleHBpcmVzID0gZ2V0RXhwaXJlc0Zyb21Ub2tlblJlc3BvbnNlKHRva2VuUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gbmV3IFRva2VucyhlZGl0b3JPcmlnaW4sIHJlZnJlc2gsIGFjY2VzcywgZXhwaXJlcyk7XG4gICAgfVxuICAgIGFzeW5jIF9mZXRjaE5ld0FjY2Vzc1Rva2VuKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLm9yaWdpbn0vb2F1dGgvdG9rZW5gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nLFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoX3Rva2VuOiB0aGlzLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogdGhpcy5fcmV2b2tlZC5zaWduYWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBJR05PUkVEX0VSUk9SO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGFzc2VydFRva2VuUmVzcG9uc2UodG9rZW5SZXNwb25zZSk7XG4gICAgICAgICAgICBjb25zdCB7IGFjY2Vzc190b2tlbjogYWNjZXNzLCByZWZyZXNoX3Rva2VuOiByZWZyZXNoIH0gPSB0b2tlblJlc3BvbnNlO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlcyA9IGdldEV4cGlyZXNGcm9tVG9rZW5SZXNwb25zZSh0b2tlblJlc3BvbnNlKTtcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzID0gYWNjZXNzO1xuICAgICAgICAgICAgdGhpcy5leHBpcmVzID0gZXhwaXJlcztcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCA9IHJlZnJlc2g7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjbGVhclRva2Vuc0luU3RvcmFnZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zeW5jKCkge1xuICAgICAgICBwZXJzaXN0VG9rZW5zSW5TdG9yYWdlKHRoaXMpO1xuICAgICAgICBmaXJlQWNjZXNzVG9rZW5DaGFuZ2VkKHRoaXMuYWNjZXNzKTtcbiAgICB9XG4gICAgYXN5bmMgX3N0YXJ0UmVmcmVzaFRva2Vuc0xvb3Aob25GYWlsZWRSZWZyZXNoKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW4gPSB0aGlzLmV4cGlyZXMgLSBEYXRlLm5vdygpIC0gMTAwMDtcbiAgICAgICAgICAgIGF3YWl0IHdhaXQoTWF0aC5tYXgoZXhwaXJlc0luLCAxMDAwKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmV2b2tlZC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5fZmV0Y2hOZXdBY2Nlc3NUb2tlbigpKSB7XG4gICAgICAgICAgICAgICAgb25GYWlsZWRSZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fc3luYygpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVG9rZW5zSW5TdG9yYWdlKCkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfVE9LRU5TX05BTUUpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVycy5saXN0ZW4obGlzdGVuZXIpO1xufVxuZnVuY3Rpb24gcmVhZFRva2Vuc0Zyb21TdG9yYWdlKCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRUb2tlbnMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX1RPS0VOU19OQU1FKTtcbiAgICBpZiAoIXNlcmlhbGl6ZWRUb2tlbnMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHNlcmlhbGl6ZWRUb2tlbnMpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBlcnNpc3RUb2tlbnNJblN0b3JhZ2UodG9rZW5zKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9UT0tFTlNfTkFNRSwgSlNPTi5zdHJpbmdpZnkodG9rZW5zKSk7XG59XG5mdW5jdGlvbiBnZXRFeHBpcmVzRnJvbVRva2VuUmVzcG9uc2UoeyBjcmVhdGVkX2F0LCBleHBpcmVzX2luIH0pIHtcbiAgICByZXR1cm4gKGNyZWF0ZWRfYXQgKyBleHBpcmVzX2luKSAqIDEwMDA7XG59XG5mdW5jdGlvbiBhc3NlcnRUb2tlblJlc3BvbnNlKHRva2VuKSB7XG4gICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ29iamVjdCcgfHwgIXRva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBUb2tlbiBSZXNwb25zZScpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRva2VuLmFjY2Vzc190b2tlbiAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgdHlwZW9mIHRva2VuLnJlZnJlc2hfdG9rZW4gIT09ICdzdHJpbmcnIHx8XG4gICAgICAgIHR5cGVvZiB0b2tlbi5jcmVhdGVkX2F0ICE9PSAnbnVtYmVyJyB8fFxuICAgICAgICB0eXBlb2YgdG9rZW4uZXhwaXJlc19pbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFRva2VuIFJlc3BvbnNlJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gd2FpdChtcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuZnVuY3Rpb24gZmlyZUFjY2Vzc1Rva2VuQ2hhbmdlZChhY2Nlc3NUb2tlbikge1xuICAgIGFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVycy5maXJlRXZlbnQoYWNjZXNzVG9rZW4pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/preview-message-types.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* binding */ PreviewMessageType)\n/* harmony export */ });\n/**\n * This type is in a separate module so that localservice can import it\n * without bundling all the other webcontainer specific stuff.\n */\nvar PreviewMessageType;\n(function (PreviewMessageType) {\n    PreviewMessageType[\"UncaughtException\"] = \"PREVIEW_UNCAUGHT_EXCEPTION\";\n    PreviewMessageType[\"UnhandledRejection\"] = \"PREVIEW_UNHANDLED_REJECTION\";\n    PreviewMessageType[\"ConsoleError\"] = \"PREVIEW_CONSOLE_ERROR\";\n})(PreviewMessageType || (PreviewMessageType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3ByZXZpZXctbWVzc2FnZS10eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgdHlwZSBpcyBpbiBhIHNlcGFyYXRlIG1vZHVsZSBzbyB0aGF0IGxvY2Fsc2VydmljZSBjYW4gaW1wb3J0IGl0XG4gKiB3aXRob3V0IGJ1bmRsaW5nIGFsbCB0aGUgb3RoZXIgd2ViY29udGFpbmVyIHNwZWNpZmljIHN0dWZmLlxuICovXG5leHBvcnQgdmFyIFByZXZpZXdNZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoUHJldmlld01lc3NhZ2VUeXBlKSB7XG4gICAgUHJldmlld01lc3NhZ2VUeXBlW1wiVW5jYXVnaHRFeGNlcHRpb25cIl0gPSBcIlBSRVZJRVdfVU5DQVVHSFRfRVhDRVBUSU9OXCI7XG4gICAgUHJldmlld01lc3NhZ2VUeXBlW1wiVW5oYW5kbGVkUmVqZWN0aW9uXCJdID0gXCJQUkVWSUVXX1VOSEFORExFRF9SRUpFQ1RJT05cIjtcbiAgICBQcmV2aWV3TWVzc2FnZVR5cGVbXCJDb25zb2xlRXJyb3JcIl0gPSBcIlBSRVZJRVdfQ09OU09MRV9FUlJPUlwiO1xufSkoUHJldmlld01lc3NhZ2VUeXBlIHx8IChQcmV2aWV3TWVzc2FnZVR5cGUgPSB7fSkpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/reload-preview.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/is-preview-message.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDTTtBQUNDIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IHJlbG9hZFByZXZpZXcgfSBmcm9tICcuL3V0aWxzL3JlbG9hZC1wcmV2aWV3LmpzJztcbmV4cG9ydCB7IFByZXZpZXdNZXNzYWdlVHlwZSB9IGZyb20gJy4vcHJldmlldy1tZXNzYWdlLXR5cGVzLmpzJztcbmV4cG9ydCB7IGlzUHJldmlld01lc3NhZ2UgfSBmcm9tICcuL3V0aWxzL2lzLXByZXZpZXctbWVzc2FnZS5qcyc7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js":
/*!******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/file-system.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toExternalFileSystemTree: () => (/* binding */ toExternalFileSystemTree),\n/* harmony export */   toInternalFileSystemTree: () => (/* binding */ toInternalFileSystemTree)\n/* harmony export */ });\n/* harmony import */ var _null_prototype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./null-prototype.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\");\n\nconst binaryDecoder = new TextDecoder('latin1');\n/**\n * @internal\n */\nfunction toInternalFileSystemTree(tree) {\n    const newTree = { d: {} };\n    for (const name of Object.keys(tree)) {\n        const entry = tree[name];\n        if ('file' in entry) {\n            if ('symlink' in entry.file) {\n                newTree.d[name] = { f: { l: entry.file.symlink } };\n                continue;\n            }\n            const contents = entry.file.contents;\n            const stringContents = typeof contents === 'string' ? contents : binaryDecoder.decode(contents);\n            const binary = typeof contents === 'string' ? {} : { b: true };\n            newTree.d[name] = { f: { c: stringContents, ...binary } };\n            continue;\n        }\n        const newEntry = toInternalFileSystemTree(entry.directory);\n        newTree.d[name] = newEntry;\n    }\n    return newTree;\n}\n/**\n * @internal\n */\nfunction toExternalFileSystemTree(tree) {\n    const newTree = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)();\n    if ('f' in tree) {\n        throw new Error('It is not possible to export a single file in the JSON format.');\n    }\n    if ('d' in tree) {\n        for (const name of Object.keys(tree.d)) {\n            const entry = tree.d[name];\n            if ('d' in entry) {\n                newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                    directory: toExternalFileSystemTree(entry),\n                });\n            }\n            else if ('f' in entry) {\n                if ('c' in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            contents: entry.f.b ? fromBinaryString(entry.f.c) : entry.f.c,\n                        }),\n                    });\n                }\n                else if ('l' in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            symlink: entry.f.l,\n                        }),\n                    });\n                }\n            }\n        }\n    }\n    return newTree;\n}\nfunction fromBinaryString(s) {\n    const encoded = new Uint8Array(s.length);\n    for (let i = 0; i < s.length; i++) {\n        encoded[i] = s[i].charCodeAt(0);\n    }\n    return encoded;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9maWxlLXN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxLQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELElBQUk7QUFDakUsZ0NBQWdDLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLG9CQUFvQixpRUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpRUFBYTtBQUM3QztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaUVBQWE7QUFDakQsOEJBQThCLGlFQUFhO0FBQzNDO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esb0NBQW9DLGlFQUFhO0FBQ2pELDhCQUE4QixpRUFBYTtBQUMzQztBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzL2ZpbGUtc3lzdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG51bGxQcm90b3R5cGUgfSBmcm9tICcuL251bGwtcHJvdG90eXBlLmpzJztcbmNvbnN0IGJpbmFyeURlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ2xhdGluMScpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvSW50ZXJuYWxGaWxlU3lzdGVtVHJlZSh0cmVlKSB7XG4gICAgY29uc3QgbmV3VHJlZSA9IHsgZDoge30gfTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXModHJlZSkpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0cmVlW25hbWVdO1xuICAgICAgICBpZiAoJ2ZpbGUnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICBpZiAoJ3N5bWxpbmsnIGluIGVudHJ5LmZpbGUpIHtcbiAgICAgICAgICAgICAgICBuZXdUcmVlLmRbbmFtZV0gPSB7IGY6IHsgbDogZW50cnkuZmlsZS5zeW1saW5rIH0gfTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRzID0gZW50cnkuZmlsZS5jb250ZW50cztcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0NvbnRlbnRzID0gdHlwZW9mIGNvbnRlbnRzID09PSAnc3RyaW5nJyA/IGNvbnRlbnRzIDogYmluYXJ5RGVjb2Rlci5kZWNvZGUoY29udGVudHMpO1xuICAgICAgICAgICAgY29uc3QgYmluYXJ5ID0gdHlwZW9mIGNvbnRlbnRzID09PSAnc3RyaW5nJyA/IHt9IDogeyBiOiB0cnVlIH07XG4gICAgICAgICAgICBuZXdUcmVlLmRbbmFtZV0gPSB7IGY6IHsgYzogc3RyaW5nQ29udGVudHMsIC4uLmJpbmFyeSB9IH07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdFbnRyeSA9IHRvSW50ZXJuYWxGaWxlU3lzdGVtVHJlZShlbnRyeS5kaXJlY3RvcnkpO1xuICAgICAgICBuZXdUcmVlLmRbbmFtZV0gPSBuZXdFbnRyeTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1RyZWU7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9FeHRlcm5hbEZpbGVTeXN0ZW1UcmVlKHRyZWUpIHtcbiAgICBjb25zdCBuZXdUcmVlID0gbnVsbFByb3RvdHlwZSgpO1xuICAgIGlmICgnZicgaW4gdHJlZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0l0IGlzIG5vdCBwb3NzaWJsZSB0byBleHBvcnQgYSBzaW5nbGUgZmlsZSBpbiB0aGUgSlNPTiBmb3JtYXQuJyk7XG4gICAgfVxuICAgIGlmICgnZCcgaW4gdHJlZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXModHJlZS5kKSkge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSB0cmVlLmRbbmFtZV07XG4gICAgICAgICAgICBpZiAoJ2QnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgbmV3VHJlZVtuYW1lXSA9IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZShlbnRyeSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgnZicgaW4gZW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2MnIGluIGVudHJ5LmYpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJlZVtuYW1lXSA9IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogbnVsbFByb3RvdHlwZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IGVudHJ5LmYuYiA/IGZyb21CaW5hcnlTdHJpbmcoZW50cnkuZi5jKSA6IGVudHJ5LmYuYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2wnIGluIGVudHJ5LmYpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJlZVtuYW1lXSA9IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogbnVsbFByb3RvdHlwZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltbGluazogZW50cnkuZi5sLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3VHJlZTtcbn1cbmZ1bmN0aW9uIGZyb21CaW5hcnlTdHJpbmcocykge1xuICAgIGNvbnN0IGVuY29kZWQgPSBuZXcgVWludDhBcnJheShzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVuY29kZWRbaV0gPSBzW2ldLmNoYXJDb2RlQXQoMCk7XG4gICAgfVxuICAgIHJldHVybiBlbmNvZGVkO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/is-preview-message.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPreviewMessage: () => (/* binding */ isPreviewMessage)\n/* harmony export */ });\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n\nconst PREVIEW_MESSAGE_TYPES = [\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.ConsoleError,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UncaughtException,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UnhandledRejection,\n];\nfunction isPreviewMessage(data) {\n    if (data == null || typeof data !== 'object') {\n        return false;\n    }\n    if (!('type' in data) || !PREVIEW_MESSAGE_TYPES.includes(data.type)) {\n        return false;\n    }\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUU7QUFDakU7QUFDQSxJQUFJLHlFQUFrQjtBQUN0QixJQUFJLHlFQUFrQjtBQUN0QixJQUFJLHlFQUFrQjtBQUN0QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL21udC81QTAwMjhGODAwMjhERDJGL3Byb2plY3RzL3ZpYmVDb2RlciAobGludXgpL3ZpYmVDb2Rlci9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJldmlld01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vcHJldmlldy1tZXNzYWdlLXR5cGVzLmpzJztcbmNvbnN0IFBSRVZJRVdfTUVTU0FHRV9UWVBFUyA9IFtcbiAgICBQcmV2aWV3TWVzc2FnZVR5cGUuQ29uc29sZUVycm9yLFxuICAgIFByZXZpZXdNZXNzYWdlVHlwZS5VbmNhdWdodEV4Y2VwdGlvbixcbiAgICBQcmV2aWV3TWVzc2FnZVR5cGUuVW5oYW5kbGVkUmVqZWN0aW9uLFxuXTtcbmV4cG9ydCBmdW5jdGlvbiBpc1ByZXZpZXdNZXNzYWdlKGRhdGEpIHtcbiAgICBpZiAoZGF0YSA9PSBudWxsIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCd0eXBlJyBpbiBkYXRhKSB8fCAhUFJFVklFV19NRVNTQUdFX1RZUEVTLmluY2x1ZGVzKGRhdGEudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/null-prototype.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nullPrototype: () => (/* binding */ nullPrototype)\n/* harmony export */ });\n/**\n * @internal\n */\nfunction nullPrototype(source) {\n    const prototype = Object.create(null);\n    if (!source) {\n        return prototype;\n    }\n    return Object.assign(prototype, source);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9udWxsLXByb3RvdHlwZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMvbnVsbC1wcm90b3R5cGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxQcm90b3R5cGUoc291cmNlKSB7XG4gICAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gcHJvdG90eXBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm90b3R5cGUsIHNvdXJjZSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/reload-preview.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reloadPreview: () => (/* binding */ reloadPreview)\n/* harmony export */ });\n/**\n * This function reloads the provided iframe.\n *\n * @param preview The iframe page to reload.\n * @param hardRefreshTimeout The timeout after which the preview is reset if it hasn't responded to the reload event.\n */\nfunction reloadPreview(preview, hardRefreshTimeout = 200) {\n    const { port1, port2 } = new MessageChannel();\n    let resolve;\n    const promise = new Promise((_resolve) => {\n        resolve = _resolve;\n    });\n    const done = () => {\n        resolve();\n        port2.close();\n    };\n    const timeout = setTimeout(() => {\n        const iframeSrc = preview.src;\n        preview.src = iframeSrc;\n        done();\n    }, hardRefreshTimeout);\n    port2.addEventListener('message', (event) => {\n        const data = event.data;\n        if (data == null || typeof data !== 'object') {\n            return;\n        }\n        if (data.type === 'LOCALSERVICE_WINDOW_RELOADED') {\n            clearTimeout(timeout);\n            done();\n        }\n    });\n    preview.contentWindow?.postMessage({\n        type: 'LOCALSERVICE_RELOAD_WINDOW',\n        callback: port1,\n    }, '*', [port1]);\n    return promise;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9yZWxvYWQtcHJldmlldy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyIvbW50LzVBMDAyOEY4MDAyOEREMkYvcHJvamVjdHMvdmliZUNvZGVyIChsaW51eCkvdmliZUNvZGVyL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzL3JlbG9hZC1wcmV2aWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBmdW5jdGlvbiByZWxvYWRzIHRoZSBwcm92aWRlZCBpZnJhbWUuXG4gKlxuICogQHBhcmFtIHByZXZpZXcgVGhlIGlmcmFtZSBwYWdlIHRvIHJlbG9hZC5cbiAqIEBwYXJhbSBoYXJkUmVmcmVzaFRpbWVvdXQgVGhlIHRpbWVvdXQgYWZ0ZXIgd2hpY2ggdGhlIHByZXZpZXcgaXMgcmVzZXQgaWYgaXQgaGFzbid0IHJlc3BvbmRlZCB0byB0aGUgcmVsb2FkIGV2ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsb2FkUHJldmlldyhwcmV2aWV3LCBoYXJkUmVmcmVzaFRpbWVvdXQgPSAyMDApIHtcbiAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgbGV0IHJlc29sdmU7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSkgPT4ge1xuICAgICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgfSk7XG4gICAgY29uc3QgZG9uZSA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICBwb3J0Mi5jbG9zZSgpO1xuICAgIH07XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBpZnJhbWVTcmMgPSBwcmV2aWV3LnNyYztcbiAgICAgICAgcHJldmlldy5zcmMgPSBpZnJhbWVTcmM7XG4gICAgICAgIGRvbmUoKTtcbiAgICB9LCBoYXJkUmVmcmVzaFRpbWVvdXQpO1xuICAgIHBvcnQyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICAgIGlmIChkYXRhID09IG51bGwgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ0xPQ0FMU0VSVklDRV9XSU5ET1dfUkVMT0FERUQnKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBwcmV2aWV3LmNvbnRlbnRXaW5kb3c/LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogJ0xPQ0FMU0VSVklDRV9SRUxPQURfV0lORE9XJyxcbiAgICAgICAgY2FsbGJhY2s6IHBvcnQxLFxuICAgIH0sICcqJywgW3BvcnQxXSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/vendor/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Comlink: () => (/* binding */ comlink_exports)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// dist/vendor/comlink.js\nvar comlink_exports = {};\n__export(comlink_exports, {\n  createEndpoint: () => createEndpoint,\n  expose: () => expose,\n  proxy: () => proxy,\n  proxyMarker: () => proxyMarker,\n  releaseProxy: () => releaseProxy,\n  transfer: () => transfer,\n  transferHandlers: () => transferHandlers,\n  windowEndpoint: () => windowEndpoint,\n  wrap: () => wrap\n});\n\n// ../../node_modules/comlink/dist/esm/comlink.mjs\nvar proxyMarker = Symbol(\"Comlink.proxy\");\nvar createEndpoint = Symbol(\"Comlink.endpoint\");\nvar releaseProxy = Symbol(\"Comlink.releaseProxy\");\nvar throwMarker = Symbol(\"Comlink.thrown\");\nvar isObject = (val) => typeof val === \"object\" && val !== null || typeof val === \"function\";\nvar proxyTransferHandler = {\n  canHandle: (val) => isObject(val) && val[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  }\n};\nvar throwTransferHandler = {\n  canHandle: (value) => isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack\n        }\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(new Error(serialized.value.message), serialized.value);\n    }\n    throw serialized.value;\n  }\n};\nvar transferHandlers = /* @__PURE__ */ new Map([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler]\n]);\nfunction expose(obj, ep = self) {\n  ep.addEventListener(\"message\", function callback(ev) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = Object.assign({ path: [] }, ev.data);\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj2, prop) => obj2[prop], obj);\n      const rawValue = path.reduce((obj2, prop) => obj2[prop], obj);\n      switch (type) {\n        case 0:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case 1:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case 2:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case 3:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case 4:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case 5:\n          {\n            returnValue = void 0;\n          }\n          break;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue).catch((value) => {\n      return { value, [throwMarker]: 0 };\n    }).then((returnValue2) => {\n      const [wireValue, transferables] = toWireValue(returnValue2);\n      ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n      if (type === 5) {\n        ep.removeEventListener(\"message\", callback);\n        closeEndPoint(ep);\n      }\n    });\n  });\n  if (ep.start) {\n    ep.start();\n  }\n}\nfunction isMessagePort(endpoint) {\n  return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n  if (isMessagePort(endpoint))\n    endpoint.close();\n}\nfunction wrap(ep, target) {\n  return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\nfunction createProxy(ep, path = [], target = function() {\n}) {\n  let isProxyReleased = false;\n  const proxy2 = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: 5,\n            path: path.map((p) => p.toString())\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy2 };\n        }\n        const r = requestResponseMessage(ep, {\n          type: 0,\n          path: path.map((p) => p.toString())\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(ep, {\n        type: 1,\n        path: [...path, prop].map((p) => p.toString()),\n        value\n      }, transferables).then(fromWireValue);\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if (last === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: 4\n        }).then(fromWireValue);\n      }\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(ep, {\n        type: 2,\n        path: path.map((p) => p.toString()),\n        argumentList\n      }, transferables).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(ep, {\n        type: 3,\n        path: path.map((p) => p.toString()),\n        argumentList\n      }, transferables).then(fromWireValue);\n    }\n  });\n  return proxy2;\n}\nfunction myFlat(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nvar transferCache = /* @__PURE__ */ new WeakMap();\nfunction transfer(obj, transfers) {\n  transferCache.set(obj, transfers);\n  return obj;\n}\nfunction proxy(obj) {\n  return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\n  return {\n    postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context)\n  };\n}\nfunction toWireValue(value) {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: 3,\n          name,\n          value: serializedValue\n        },\n        transferables\n      ];\n    }\n  }\n  return [\n    {\n      type: 0,\n      value\n    },\n    transferCache.get(value) || []\n  ];\n}\nfunction fromWireValue(value) {\n  switch (value.type) {\n    case 3:\n      return transferHandlers.get(value.name).deserialize(value.value);\n    case 0:\n      return value.value;\n  }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l);\n      resolve(ev.data);\n    });\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage(Object.assign({ id }, msg), transfers);\n  });\n}\nfunction generateUUID() {\n  return new Array(4).fill(0).map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16)).join(\"-\");\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC92ZW5kb3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixxQkFBcUI7QUFDckI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCLGtCQUFrQixVQUFVO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsZUFBZTtBQUNmLEtBQUs7QUFDTDtBQUNBLG1EQUFtRCxnQkFBZ0IsSUFBSTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixxQkFBcUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLElBQUk7QUFDdkMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBR0UiLCJzb3VyY2VzIjpbIi9tbnQvNUEwMDI4RjgwMDI4REQyRi9wcm9qZWN0cy92aWJlQ29kZXIgKGxpbnV4KS92aWJlQ29kZXIvbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdmVuZG9yL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG5cbi8vIGRpc3QvdmVuZG9yL2NvbWxpbmsuanNcbnZhciBjb21saW5rX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGNvbWxpbmtfZXhwb3J0cywge1xuICBjcmVhdGVFbmRwb2ludDogKCkgPT4gY3JlYXRlRW5kcG9pbnQsXG4gIGV4cG9zZTogKCkgPT4gZXhwb3NlLFxuICBwcm94eTogKCkgPT4gcHJveHksXG4gIHByb3h5TWFya2VyOiAoKSA9PiBwcm94eU1hcmtlcixcbiAgcmVsZWFzZVByb3h5OiAoKSA9PiByZWxlYXNlUHJveHksXG4gIHRyYW5zZmVyOiAoKSA9PiB0cmFuc2ZlcixcbiAgdHJhbnNmZXJIYW5kbGVyczogKCkgPT4gdHJhbnNmZXJIYW5kbGVycyxcbiAgd2luZG93RW5kcG9pbnQ6ICgpID0+IHdpbmRvd0VuZHBvaW50LFxuICB3cmFwOiAoKSA9PiB3cmFwXG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2NvbWxpbmsvZGlzdC9lc20vY29tbGluay5tanNcbnZhciBwcm94eU1hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsucHJveHlcIik7XG52YXIgY3JlYXRlRW5kcG9pbnQgPSBTeW1ib2woXCJDb21saW5rLmVuZHBvaW50XCIpO1xudmFyIHJlbGVhc2VQcm94eSA9IFN5bWJvbChcIkNvbWxpbmsucmVsZWFzZVByb3h5XCIpO1xudmFyIHRocm93TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay50aHJvd25cIik7XG52YXIgaXNPYmplY3QgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbCAhPT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XG52YXIgcHJveHlUcmFuc2ZlckhhbmRsZXIgPSB7XG4gIGNhbkhhbmRsZTogKHZhbCkgPT4gaXNPYmplY3QodmFsKSAmJiB2YWxbcHJveHlNYXJrZXJdLFxuICBzZXJpYWxpemUob2JqKSB7XG4gICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgIGV4cG9zZShvYmosIHBvcnQxKTtcbiAgICByZXR1cm4gW3BvcnQyLCBbcG9ydDJdXTtcbiAgfSxcbiAgZGVzZXJpYWxpemUocG9ydCkge1xuICAgIHBvcnQuc3RhcnQoKTtcbiAgICByZXR1cm4gd3JhcChwb3J0KTtcbiAgfVxufTtcbnZhciB0aHJvd1RyYW5zZmVySGFuZGxlciA9IHtcbiAgY2FuSGFuZGxlOiAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSAmJiB0aHJvd01hcmtlciBpbiB2YWx1ZSxcbiAgc2VyaWFsaXplKHsgdmFsdWUgfSkge1xuICAgIGxldCBzZXJpYWxpemVkO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBzZXJpYWxpemVkID0ge1xuICAgICAgICBpc0Vycm9yOiB0cnVlLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsXG4gICAgICAgICAgbmFtZTogdmFsdWUubmFtZSxcbiAgICAgICAgICBzdGFjazogdmFsdWUuc3RhY2tcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VyaWFsaXplZCA9IHsgaXNFcnJvcjogZmFsc2UsIHZhbHVlIH07XG4gICAgfVxuICAgIHJldHVybiBbc2VyaWFsaXplZCwgW11dO1xuICB9LFxuICBkZXNlcmlhbGl6ZShzZXJpYWxpemVkKSB7XG4gICAgaWYgKHNlcmlhbGl6ZWQuaXNFcnJvcikge1xuICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3Ioc2VyaWFsaXplZC52YWx1ZS5tZXNzYWdlKSwgc2VyaWFsaXplZC52YWx1ZSk7XG4gICAgfVxuICAgIHRocm93IHNlcmlhbGl6ZWQudmFsdWU7XG4gIH1cbn07XG52YXIgdHJhbnNmZXJIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgW1wicHJveHlcIiwgcHJveHlUcmFuc2ZlckhhbmRsZXJdLFxuICBbXCJ0aHJvd1wiLCB0aHJvd1RyYW5zZmVySGFuZGxlcl1cbl0pO1xuZnVuY3Rpb24gZXhwb3NlKG9iaiwgZXAgPSBzZWxmKSB7XG4gIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGNhbGxiYWNrKGV2KSB7XG4gICAgaWYgKCFldiB8fCAhZXYuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGlkLCB0eXBlLCBwYXRoIH0gPSBPYmplY3QuYXNzaWduKHsgcGF0aDogW10gfSwgZXYuZGF0YSk7XG4gICAgY29uc3QgYXJndW1lbnRMaXN0ID0gKGV2LmRhdGEuYXJndW1lbnRMaXN0IHx8IFtdKS5tYXAoZnJvbVdpcmVWYWx1ZSk7XG4gICAgbGV0IHJldHVyblZhbHVlO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBwYXRoLnNsaWNlKDAsIC0xKS5yZWR1Y2UoKG9iajIsIHByb3ApID0+IG9iajJbcHJvcF0sIG9iaik7XG4gICAgICBjb25zdCByYXdWYWx1ZSA9IHBhdGgucmVkdWNlKChvYmoyLCBwcm9wKSA9PiBvYmoyW3Byb3BdLCBvYmopO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJhd1ZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBhcmVudFtwYXRoLnNsaWNlKC0xKVswXV0gPSBmcm9tV2lyZVZhbHVlKGV2LmRhdGEudmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWUuYXBwbHkocGFyZW50LCBhcmd1bWVudExpc3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHJhd1ZhbHVlKC4uLmFyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHByb3h5KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgICAgICBleHBvc2Uob2JqLCBwb3J0Mik7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRyYW5zZmVyKHBvcnQxLCBbcG9ydDFdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAodmFsdWUpIHtcbiAgICAgIHJldHVyblZhbHVlID0geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xuICAgIH1cbiAgICBQcm9taXNlLnJlc29sdmUocmV0dXJuVmFsdWUpLmNhdGNoKCh2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuIHsgdmFsdWUsIFt0aHJvd01hcmtlcl06IDAgfTtcbiAgICB9KS50aGVuKChyZXR1cm5WYWx1ZTIpID0+IHtcbiAgICAgIGNvbnN0IFt3aXJlVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmV0dXJuVmFsdWUyKTtcbiAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2lyZVZhbHVlKSwgeyBpZCB9KSwgdHJhbnNmZXJhYmxlcyk7XG4gICAgICBpZiAodHlwZSA9PT0gNSkge1xuICAgICAgICBlcC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBjYWxsYmFjayk7XG4gICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgaWYgKGVwLnN0YXJ0KSB7XG4gICAgZXAuc3RhcnQoKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNNZXNzYWdlUG9ydChlbmRwb2ludCkge1xuICByZXR1cm4gZW5kcG9pbnQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJNZXNzYWdlUG9ydFwiO1xufVxuZnVuY3Rpb24gY2xvc2VFbmRQb2ludChlbmRwb2ludCkge1xuICBpZiAoaXNNZXNzYWdlUG9ydChlbmRwb2ludCkpXG4gICAgZW5kcG9pbnQuY2xvc2UoKTtcbn1cbmZ1bmN0aW9uIHdyYXAoZXAsIHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIFtdLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNSZWxlYXNlZCkge1xuICBpZiAoaXNSZWxlYXNlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUHJveHkoZXAsIHBhdGggPSBbXSwgdGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG59KSB7XG4gIGxldCBpc1Byb3h5UmVsZWFzZWQgPSBmYWxzZTtcbiAgY29uc3QgcHJveHkyID0gbmV3IFByb3h5KHRhcmdldCwge1xuICAgIGdldChfdGFyZ2V0LCBwcm9wKSB7XG4gICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgaWYgKHByb3AgPT09IHJlbGVhc2VQcm94eSkge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgICAgICB0eXBlOiA1LFxuICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSlcbiAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xuICAgICAgICAgICAgaXNQcm94eVJlbGVhc2VkID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wID09PSBcInRoZW5cIikge1xuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eTIgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSlcbiAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHIudGhlbi5iaW5kKHIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbLi4ucGF0aCwgcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KF90YXJnZXQsIHByb3AsIHJhd1ZhbHVlKSB7XG4gICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTtcbiAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgIHR5cGU6IDEsXG4gICAgICAgIHBhdGg6IFsuLi5wYXRoLCBwcm9wXS5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXG4gICAgICAgIHZhbHVlXG4gICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgIH0sXG4gICAgYXBwbHkoX3RhcmdldCwgX3RoaXNBcmcsIHJhd0FyZ3VtZW50TGlzdCkge1xuICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdCA9PT0gY3JlYXRlRW5kcG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICB0eXBlOiA0XG4gICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAobGFzdCA9PT0gXCJiaW5kXCIpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBbYXJndW1lbnRMaXN0LCB0cmFuc2ZlcmFibGVzXSA9IHByb2Nlc3NBcmd1bWVudHMocmF3QXJndW1lbnRMaXN0KTtcbiAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgIHR5cGU6IDIsXG4gICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICBhcmd1bWVudExpc3RcbiAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgfSxcbiAgICBjb25zdHJ1Y3QoX3RhcmdldCwgcmF3QXJndW1lbnRMaXN0KSB7XG4gICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XG4gICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICB0eXBlOiAzLFxuICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgYXJndW1lbnRMaXN0XG4gICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcm94eTI7XG59XG5mdW5jdGlvbiBteUZsYXQoYXJyKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnIpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc0FyZ3VtZW50cyhhcmd1bWVudExpc3QpIHtcbiAgY29uc3QgcHJvY2Vzc2VkID0gYXJndW1lbnRMaXN0Lm1hcCh0b1dpcmVWYWx1ZSk7XG4gIHJldHVybiBbcHJvY2Vzc2VkLm1hcCgodikgPT4gdlswXSksIG15RmxhdChwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzFdKSldO1xufVxudmFyIHRyYW5zZmVyQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRyYW5zZmVyKG9iaiwgdHJhbnNmZXJzKSB7XG4gIHRyYW5zZmVyQ2FjaGUuc2V0KG9iaiwgdHJhbnNmZXJzKTtcbiAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIHByb3h5KG9iaikge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHsgW3Byb3h5TWFya2VyXTogdHJ1ZSB9KTtcbn1cbmZ1bmN0aW9uIHdpbmRvd0VuZHBvaW50KHcsIGNvbnRleHQgPSBzZWxmLCB0YXJnZXRPcmlnaW4gPSBcIipcIikge1xuICByZXR1cm4ge1xuICAgIHBvc3RNZXNzYWdlOiAobXNnLCB0cmFuc2ZlcmFibGVzKSA9PiB3LnBvc3RNZXNzYWdlKG1zZywgdGFyZ2V0T3JpZ2luLCB0cmFuc2ZlcmFibGVzKSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBjb250ZXh0LmFkZEV2ZW50TGlzdGVuZXIuYmluZChjb250ZXh0KSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBjb250ZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZChjb250ZXh0KVxuICB9O1xufVxuZnVuY3Rpb24gdG9XaXJlVmFsdWUodmFsdWUpIHtcbiAgZm9yIChjb25zdCBbbmFtZSwgaGFuZGxlcl0gb2YgdHJhbnNmZXJIYW5kbGVycykge1xuICAgIGlmIChoYW5kbGVyLmNhbkhhbmRsZSh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IFtzZXJpYWxpemVkVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gaGFuZGxlci5zZXJpYWxpemUodmFsdWUpO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IDMsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB2YWx1ZTogc2VyaWFsaXplZFZhbHVlXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zZmVyYWJsZXNcbiAgICAgIF07XG4gICAgfVxuICB9XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgdHlwZTogMCxcbiAgICAgIHZhbHVlXG4gICAgfSxcbiAgICB0cmFuc2ZlckNhY2hlLmdldCh2YWx1ZSkgfHwgW11cbiAgXTtcbn1cbmZ1bmN0aW9uIGZyb21XaXJlVmFsdWUodmFsdWUpIHtcbiAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHRyYW5zZmVySGFuZGxlcnMuZ2V0KHZhbHVlLm5hbWUpLmRlc2VyaWFsaXplKHZhbHVlLnZhbHVlKTtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gdmFsdWUudmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIG1zZywgdHJhbnNmZXJzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IGlkID0gZ2VuZXJhdGVVVUlEKCk7XG4gICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gbChldikge1xuICAgICAgaWYgKCFldi5kYXRhIHx8ICFldi5kYXRhLmlkIHx8IGV2LmRhdGEuaWQgIT09IGlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGwpO1xuICAgICAgcmVzb2x2ZShldi5kYXRhKTtcbiAgICB9KTtcbiAgICBpZiAoZXAuc3RhcnQpIHtcbiAgICAgIGVwLnN0YXJ0KCk7XG4gICAgfVxuICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oeyBpZCB9LCBtc2cpLCB0cmFuc2ZlcnMpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcbiAgcmV0dXJuIG5ldyBBcnJheSg0KS5maWxsKDApLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKS5qb2luKFwiLVwiKTtcbn1cbmV4cG9ydCB7XG4gIGNvbWxpbmtfZXhwb3J0cyBhcyBDb21saW5rXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\n");

/***/ })

};
;